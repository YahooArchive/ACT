<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/library/ACT_dom.js - ACT.js</title>
    <link rel="stylesheet" href="https://s.yimg.com/zz/combo?yui-s:3.14.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="https://s.yimg.com/rz/l/favicon.ico">
    <script src="https://s.yimg.com/zz/combo?yui-s:3.14.1/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="https://s.yimg.com/cv/ae/global/ACTJS/logo/ACT.js.logo.png" title="ACT.js" width="126" height="100"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.22</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                            <li><a href="#api-demos">Demo and Examples</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ACT.html">ACT</a></li>
                                <li><a href="../classes/ActionsQueue.html">ActionsQueue</a></li>
                                <li><a href="../classes/Base.html">Base</a></li>
                                <li><a href="../classes/Capability.html">Capability</a></li>
                                <li><a href="../classes/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../classes/Class.html">Class</a></li>
                                <li><a href="../classes/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../classes/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../classes/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../classes/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../classes/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../classes/ContentImage.html">ContentImage</a></li>
                                <li><a href="../classes/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../classes/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../classes/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../classes/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../classes/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../classes/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../classes/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../classes/Cookie.html">Cookie</a></li>
                                <li><a href="../classes/CustomData.html">CustomData</a></li>
                                <li><a href="../classes/Debug.html">Debug</a></li>
                                <li><a href="../classes/Dom.html">Dom</a></li>
                                <li><a href="../classes/DwellTime.html">DwellTime</a></li>
                                <li><a href="../classes/Enabler.html">Enabler</a></li>
                                <li><a href="../classes/Environment.html">Environment</a></li>
                                <li><a href="../classes/Event.html">Event</a></li>
                                <li><a href="../classes/Flash.html">Flash</a></li>
                                <li><a href="../classes/IO.html">IO</a></li>
                                <li><a href="../classes/Json.html">Json</a></li>
                                <li><a href="../classes/Lang.html">Lang</a></li>
                                <li><a href="../classes/LayersList.html">LayersList</a></li>
                                <li><a href="../classes/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../classes/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../classes/Screen.html">Screen</a></li>
                                <li><a href="../classes/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../classes/StandardAd.html">StandardAd</a></li>
                                <li><a href="../classes/Tracking.html">Tracking</a></li>
                                <li><a href="../classes/UA.html">UA</a></li>
                                <li><a href="../classes/Util.html">Util</a></li>
                                <li><a href="../classes/VideoEvents.html">VideoEvents</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ACT.html">ACT</a></li>
                                <li><a href="../modules/actionsQueue.html">actionsQueue</a></li>
                                <li><a href="../modules/Base.html">Base</a></li>
                                <li><a href="../modules/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../modules/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../modules/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../modules/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../modules/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../modules/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../modules/ContentImage.html">ContentImage</a></li>
                                <li><a href="../modules/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../modules/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../modules/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../modules/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../modules/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../modules/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../modules/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../modules/Cookie.html">Cookie</a></li>
                                <li><a href="../modules/DwellTime.html">DwellTime</a></li>
                                <li><a href="../modules/Enabler.html">Enabler</a></li>
                                <li><a href="../modules/environment.html">environment</a></li>
                                <li><a href="../modules/IO.html">IO</a></li>
                                <li><a href="../modules/LayersList.html">LayersList</a></li>
                                <li><a href="../modules/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../modules/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../modules/Screen.html">Screen</a></li>
                                <li><a href="../modules/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../modules/StandardAd.html">StandardAd</a></li>
                                <li><a href="../modules/Tracking.html">Tracking</a></li>
                            </ul>
                
                            <ul id="api-demos" class="apis demos">
                                <li><a href="../demo/ACT_Demo_300x250.html">300x250</a></li>
                                <li><a href="../demo/ACT_Demo_300x250_tracking.html">300x250_tracking</a></li>
                                <li><a href="../demo/ACT_Demo_TrackingExample.html">TrackingExample</a></li>
                                <li><a href="../demo/ACT_Demo_animation.html">animation</a></li>
                                <li><a href="../demo/ACT_Demo_billboard.html">billboard</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-enabler.html">billboard-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-expandable-enabler.html">billboard-expandable-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video.html">billboard_html_video</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video_rtl.html">billboard_html_video_rtl</a></li>
                                <li><a href="../demo/ACT_Demo_carousel.html">carousel</a></li>
                                <li><a href="../demo/ACT_Demo_dwelltime.html">dwelltime</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_expand.html">enabler_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_fullscreen_expand.html">enabler_fullscreen_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_target.html">enabler_target</a></li>
                                <li><a href="../demo/ACT_Demo_floating.html">floating</a></li>
                                <li><a href="../demo/ACT_Demo_force_env.html">force_env</a></li>
                                <li><a href="../demo/ACT_Demo_html5_enabler.html">html5_enabler</a></li>
                                <li><a href="../demo/ACT_Demo_html5_standard.html">html5_standard</a></li>
                                <li><a href="../demo/ACT_Demo_icons.html">icons</a></li>
                                <li><a href="../demo/ACT_Demo_input_data.html">input_data</a></li>
                                <li><a href="../demo/ACT_Demo_login_html.html">login_html</a></li>
                                <li><a href="../demo/ACT_Demo_overwrite_env.html">overwrite_env</a></li>
                                <li><a href="../demo/ACT_Demo_splash_ad.html">splash_ad</a></li>
                                <li><a href="../demo/ACT_Demo_tablet_expandable.html">tablet_expandable</a></li>
                                <li><a href="../demo/ACT_Demo_video_event.html">video_event</a></li>
                                <li><a href="../demo/ACT_Demo_video_html.html">video_html</a></li>
                            </ul>
                
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/library/ACT_dom.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
 * Copyright 2016, Yahoo Inc.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 */

/* global ACT */
ACT.define(&#x27;Dom&#x27;, [/*@&lt;*/&#x27;Debug&#x27;, /*&gt;@*/ &#x27;Lang&#x27;, &#x27;UA&#x27;], function (ACT) {
    &#x27;use strict&#x27;;

    var UA = ACT.UA;
    /*@&lt;*/
    var Debug = ACT.Debug;
    Debug.log(&#x27;[ ACT_dom.js ] : loaded&#x27;);
    /*&gt;@*/

    /**
     * ACT DOM Utilities and Helpers
     * @class Dom
     * @module ACT
     * @requires lang, UA
     * @static
     */
    function Dom() {
        /* Dom is a singleton */
        /* istanbul ignore if */
        if (Dom.prototype.singleton) {
            return Dom.prototype.singleton;
        }
        Dom.prototype.singleton = this;
    }

    /**
     * @attribute ATTRS
     * @type {{NAME: string, version: string}}
     * @initOnly
     */
    Dom.ATTRS = {
        NAME: &#x27;Dom&#x27;,
        version: &#x27;1.0.41&#x27;
    };

    Dom.prototype = {

        /**
         * Wrapper for document.getElementById
         * @param {String} obj ID of the element on the page
         * @return {Object}  Reference to the embeded object
         * @method byId
         * @public
         * @static
         */
        byId: function (obj) {
            return document.getElementById(obj);
        },

        /**
         * Determine viewport offset for an element
         * @param {String | Object} forElement Element id to get the offset info for
         * @method viewportOffset
         * @return {Object} set of two values, left and top wich are offset in pixels.
         * @public
         * @static
         */
        viewportOffset: function (forElement) {
            var element = (typeof forElement === &#x27;string&#x27;) ? this.byId(forElement) : forElement;
            var valueT = element.offsetTop || 0;
            var valueL = element.offsetLeft || 0;

            while (element !== document.body) {
                valueT += element.offsetTop || 0;
                valueL += element.offsetLeft || 0;
                element = element.offsetParent;
            }

            return {
                left: valueL,
                top: valueT
            };
        },

        /**
         * Helper function to dtermine if a given element has the given class name
         * @param {Object} element Element to test against
         * @param {String} className Classname to test for
         * @method hasClass
         * @return {Boolean} true if the classname exists false otherwise
         * @public
         * @static
         */
        hasClass: function (element, className) {
            var domRef = ACT.Dom;
            var SPACE = &#x27; &#x27;;
            var current;
            if (domRef.isDomElement(element)) {
                current = element.className.toString().replace(/\s+/g, SPACE);
                return className &amp;&amp; (SPACE + current + SPACE).indexOf(SPACE + className + SPACE) &gt; -1;
            }
            return false;
        },

        /**
         * Wrapper function to get elements by Class Name
         * @param {String} className that the elements contain
         * @param {Object} refObj node or null to search the entire document
         * @return {Array} elements with the given class name - empty array if none
         * @method byClassName
         * @public
         * @static
         */
        byClassName: function (className, refObj) {
            var doc = refObj || document;
            var nodes = [];
            var domRef = ACT.Dom;
            var i;
            var elements;
            var len;
            /* istanbul ignore else */
            if (doc.getElementsByClassName) {
                nodes = doc.getElementsByClassName(className);
            } else if (doc &amp;&amp; doc.getElementsByTagName) {
                elements = doc.getElementsByTagName(&#x27;*&#x27;);
                if (!elements) {
                    return [];
                }
                for (i = 0, len = elements.length; i &lt; len; ++i) {
                    if (domRef.hasClass(elements[i], className)) {
                        nodes[nodes.length] = elements[i];
                    }
                }
            }
            return nodes;
        },

        /**
         * Adds a new class to a DOM element&#x27;s classList
         * @param element
         * @param className
         * @returns {boolean}
         */
        addClass: function (element, className) {
            var finalArray = [];
            var domRef = ACT.Dom;
            if (element &amp;&amp; className &amp;&amp; (!domRef.hasClass(element, className))) {
                if (element.className) {
                    finalArray = element.className.split(&#x27; &#x27;);
                }
                finalArray.push(className);
                element.className = finalArray.join(&#x27; &#x27;);
                return true;
            }
            return false;
        },

        /**
         * Removes one existing class name from the element&#x27;s class list
         * @param {Object} DOM element
         * @param {String} className
         * @returns {boolean} Success
         * @public
         */
        removeClass: function (element, className) {
            var classArray;
            var i;
            var finalArray = [];
            var domRef = ACT.Dom;
            if (domRef.hasClass(element, className)) {
                classArray = element.className.split(&#x27; &#x27;);
                for (i = 0; i &lt; classArray.length; i++) {
                    if (classArray[i] !== className) {
                        finalArray.push(classArray[i]);
                    }
                }
                element.className = finalArray.join(&#x27; &#x27;);
                return true;
            }
            return false;
        },

        /**
         * Given HTML in text form returns a documentFragment reference
         * @param {String} html The HTML to convert to documentFragment
         * @return {Object} documentFragment Node reference.
         * @method nodeCreate
         * @public
         * @static
         */
        nodeCreate: function (html) {
            var dom = document.createElement(&#x27;DIV&#x27;);
            var ret = document.createDocumentFragment();
            var nodes;
            dom.innerHTML = html;
            nodes = dom.childNodes;
            while (nodes[0]) {
                ret.appendChild(nodes[0].parentNode.removeChild(nodes[0]));
            }
            return ret;
        },

        /**
         * Given an element and a selector (className) returns the first parentNode with that className
         * @param {String} selector ClassName of the parent we&#x27;re looking for
         * @param {Object} element Element to start from
         * @return {Object} returns the object reference to the node or null if none found
         * @method getParent
         * @public
         * @static
         */
        getParent: function (selector, element) {
            var domRef = ACT.Dom;
            if (domRef.hasClass(element, selector)) {
                return element;
            }
			if (element.parentNode) {
				return domRef.getParent(selector, element.parentNode);
			}

            return null;
        },

        /**
         * Helper function to empty nodes innerHTML
         * @param {Object} element Element to empty
         * @method clear
         * @public
         * @static
         */
        clear: function (element) {
            var domRef = ACT.Dom;
            if (domRef.isDomElement(element)) {
                element.innerHTML = &#x27;&#x27;;
            }
        },

        /**
         * Helper function to set the nodes visibility to hidden or visible
         * @param {Object} element Element to hide
         * @param {Boolean} true to set to visible false to hidden
         * @method visible
         * @public
         * @static
         */
        visible: function (element, show) {
            var domRef = ACT.Dom;
            /* istanbul ignore else */
            if (domRef.isDomElement(element)) {
                if (show) {
                    element.style.visibility = &#x27;visible&#x27;;
                } else {
                    element.style.visibility = &#x27;hidden&#x27;;
                }
            }
        },

        /**
         * Helper function to change the display style of a nodes to block
         * @param {Object} element Element to display
         * @param {String} &quot;block&quot;, &quot;inline&quot;, &quot;none&quot; or null to revert to default
         * @method display
         * @public
         * @static
         */
        display: function (element, show) {
            var domRef = ACT.Dom;
            /* istanbul ignore else */
            if (domRef.isDomElement(element)) {
                if (show) {
                    element.style.display = show;
                } else {
                    element.style.display = &#x27;&#x27;;
                }
            }
        },

        /**
         * Allows to register CSS rules within the stylesheet
         * @param {Object} sheet - StyleSheet.sheet
         * @param {String} selector - CSS selector
         * @param {String} rules - CSS rules (don&#x27;t forget to end all lines with &quot;;&quot; )
         * @param {Number} index
         * @method addCSSRule
         * @public
         * @static
         */
        addCSSRule: function (sheet, selector, rules, index) {
            // insertRule is not available in earlier IE versions
            if (sheet.insertRule) {
                sheet.insertRule(selector + &#x27;{&#x27; + rules + &#x27;}&#x27;, index);
            } else {
                sheet.addRule(selector, rules, index);
            }
        },

        /**
         * Creates a new style tag and returns its stylesheet
         * @method createStylesheet
         * @return StyleSheet.sheet
         * @public
         * @static
         */
        createStylesheet: function () {
            var style;
            var head;
            var browser = UA.browser;

            // fix JUST for IE... no more comments...
            if (browser.name === &#x27;MSIE&#x27; &amp;&amp; browser.version &gt;= 6 &amp;&amp; browser.version &lt;= 10) {
                style = document.createStyleSheet();
                return style;
            }
			style = document.createElement(&#x27;style&#x27;);
			head = document.getElementsByTagName(&#x27;head&#x27;)[0];
			// Webkit hack
			style.appendChild(document.createTextNode(&#x27;&#x27;));
			head.appendChild(style);
			return style.sheet ? style.sheet : style.styleSheet;
        },

        /**
         * Calculates browser window size returning its width and height
         * @method getWindowSize
         * @returns {{width: (Number), height: (Number)}}
         * @public
         * @static
         */
        getWindowSize: function () {
            var w = window;
            var d = document;
            var e = d.documentElement;
            var g = d.getElementsByTagName(&#x27;body&#x27;)[0];
            var width;
            var height;
            var os = UA.os.name;

            width = w.innerWidth ? w.innerWidth : 0;
            height = w.innerHeight ? w.innerHeight : 0;

            /* istanbul ignore else */
            if (os !== &#x27;ios&#x27;) {
                width = e.clientWidth &amp;&amp; e.clientWidth &gt; width ? e.clientWidth : width;
                height = e.clientHeight &amp;&amp; e.clientHeight &gt; height ? e.clientHeight : height;
                /* istanbul ignore else */
                if (!width || !height) {
                    width = g.clientWidth &amp;&amp; g.clientWidth &gt; width ? g.clientWidth : width;
                    height = g.clientHeight &amp;&amp; g.clientHeight &gt; height ? g.clientHeight : height;
                }
            }

            return {
                width: width,
                height: height
            };
        },

        /**
         * Get current position of given dom elment
         * @method getElementPosition
         * @public
         * @param {DomElement} element Element to get position
         * @return {Array} Position X and Y. E.g [x, y]
         */
        getElementPosition: function (element) {
            var xPosition = 0;
            var yPosition = 0;

            while (element &amp;&amp; element !== document.body) {
                xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
                yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
                element = element.offsetParent;
            }

            return [xPosition, yPosition];
        },

        /**
         * Applies a set of styles to an element
         * @method applyStyles
         * @param {Object} el Element upon which to apply the styles defined
         * @param {Object} styles Object of styles to apply
         * @public
         * @static
         */
        applyStyles: function (el, styles) {
            var s;
            for (s in styles) {
                /* istanbul ignore else */
                if (styles.hasOwnProperty(s)) {
                    el.style[s] = styles[s];
                }
            }
        },

        /**
         * Set attributes to given node
         *
         * @method setAttributes
         * @private
         * @param {HTMLElement} node
         * @param {Object} attrs a key-&gt;value set where key is the attribute name and value is the value to be set.
         */
        setAttributes: function (node, attrs) {
            var attr;
            for (attr in attrs) {
                /* istanbul ignore else */
                if (attrs.hasOwnProperty(attr)) {
                    node.setAttribute(attr, attrs[attr]);
                }
            }
        },

        /**
         * Checks if parameter is a DOM element
         * @param {Object} o DOM element
         * @returns {boolean} true for DOM element
         */
        isDomElement: function (o) {
            return typeof HTMLElement === &#x27;object&#x27; ? o instanceof HTMLElement : // DOM2
            o &amp;&amp; typeof o === &#x27;object&#x27; &amp;&amp; o !== null &amp;&amp; o.nodeType === 1 &amp;&amp; typeof o.nodeName === &#x27;string&#x27;;
        },

        /**
         * Calculates the right proportion based on maximum width and height when
         * browser window is smaller than image.
         * @param {Number} width - image width
         * @param {Number} height - image height
         * @method getMinProportion
         * @return {Number} proportion value
         * @public
         * @static
         */
        getMinProportion: function (width, height) {
            var windowSize = this.getWindowSize();
            var widthProportion = width ? (windowSize.width / width) : 1;
            var heightProportion = height ? (windowSize.height / height) : 1;
            var finalProportion = 1;
            /* istanbul ignore else */
            if (widthProportion &lt; 1 &amp;&amp; widthProportion &lt; heightProportion) {
                finalProportion = widthProportion;
            } else if (heightProportion &lt; 1 &amp;&amp; heightProportion &lt; widthProportion) {
                finalProportion = heightProportion;
            }
            return finalProportion;
        },

        /**
         * Return the current url of the window
         * The main reason for this method is to help us with the testing
         *
         * @method getCurrentLocation
         */
        getCurrentLocation: function () {
            return window.location.href;
        }

    };

    return new Dom();
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
