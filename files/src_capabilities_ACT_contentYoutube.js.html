<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/capabilities/ACT_contentYoutube.js - ACT.js</title>
    <link rel="stylesheet" href="https://s.yimg.com/zz/combo?yui-s:3.14.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="https://s.yimg.com/rz/l/favicon.ico">
    <script src="https://s.yimg.com/zz/combo?yui-s:3.14.1/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="https://s.yimg.com/cv/ae/global/ACTJS/logo/ACT.js.logo.png" title="ACT.js" width="126" height="100"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.22</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                            <li><a href="#api-demos">Demo and Examples</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ACT.html">ACT</a></li>
                                <li><a href="../classes/ActionsQueue.html">ActionsQueue</a></li>
                                <li><a href="../classes/Base.html">Base</a></li>
                                <li><a href="../classes/Capability.html">Capability</a></li>
                                <li><a href="../classes/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../classes/Class.html">Class</a></li>
                                <li><a href="../classes/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../classes/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../classes/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../classes/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../classes/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../classes/ContentImage.html">ContentImage</a></li>
                                <li><a href="../classes/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../classes/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../classes/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../classes/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../classes/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../classes/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../classes/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../classes/Cookie.html">Cookie</a></li>
                                <li><a href="../classes/CustomData.html">CustomData</a></li>
                                <li><a href="../classes/Debug.html">Debug</a></li>
                                <li><a href="../classes/Dom.html">Dom</a></li>
                                <li><a href="../classes/DwellTime.html">DwellTime</a></li>
                                <li><a href="../classes/Enabler.html">Enabler</a></li>
                                <li><a href="../classes/Environment.html">Environment</a></li>
                                <li><a href="../classes/Event.html">Event</a></li>
                                <li><a href="../classes/Flash.html">Flash</a></li>
                                <li><a href="../classes/IO.html">IO</a></li>
                                <li><a href="../classes/Json.html">Json</a></li>
                                <li><a href="../classes/Lang.html">Lang</a></li>
                                <li><a href="../classes/LayersList.html">LayersList</a></li>
                                <li><a href="../classes/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../classes/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../classes/Screen.html">Screen</a></li>
                                <li><a href="../classes/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../classes/StandardAd.html">StandardAd</a></li>
                                <li><a href="../classes/Tracking.html">Tracking</a></li>
                                <li><a href="../classes/UA.html">UA</a></li>
                                <li><a href="../classes/Util.html">Util</a></li>
                                <li><a href="../classes/VideoEvents.html">VideoEvents</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ACT.html">ACT</a></li>
                                <li><a href="../modules/actionsQueue.html">actionsQueue</a></li>
                                <li><a href="../modules/Base.html">Base</a></li>
                                <li><a href="../modules/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../modules/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../modules/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../modules/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../modules/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../modules/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../modules/ContentImage.html">ContentImage</a></li>
                                <li><a href="../modules/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../modules/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../modules/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../modules/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../modules/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../modules/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../modules/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../modules/Cookie.html">Cookie</a></li>
                                <li><a href="../modules/DwellTime.html">DwellTime</a></li>
                                <li><a href="../modules/Enabler.html">Enabler</a></li>
                                <li><a href="../modules/environment.html">environment</a></li>
                                <li><a href="../modules/IO.html">IO</a></li>
                                <li><a href="../modules/LayersList.html">LayersList</a></li>
                                <li><a href="../modules/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../modules/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../modules/Screen.html">Screen</a></li>
                                <li><a href="../modules/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../modules/StandardAd.html">StandardAd</a></li>
                                <li><a href="../modules/Tracking.html">Tracking</a></li>
                            </ul>
                
                            <ul id="api-demos" class="apis demos">
                                <li><a href="../demo/ACT_Demo_300x250.html">300x250</a></li>
                                <li><a href="../demo/ACT_Demo_300x250_tracking.html">300x250_tracking</a></li>
                                <li><a href="../demo/ACT_Demo_TrackingExample.html">TrackingExample</a></li>
                                <li><a href="../demo/ACT_Demo_animation.html">animation</a></li>
                                <li><a href="../demo/ACT_Demo_billboard.html">billboard</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-enabler.html">billboard-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-expandable-enabler.html">billboard-expandable-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video.html">billboard_html_video</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video_rtl.html">billboard_html_video_rtl</a></li>
                                <li><a href="../demo/ACT_Demo_carousel.html">carousel</a></li>
                                <li><a href="../demo/ACT_Demo_dwelltime.html">dwelltime</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_expand.html">enabler_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_fullscreen_expand.html">enabler_fullscreen_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_target.html">enabler_target</a></li>
                                <li><a href="../demo/ACT_Demo_floating.html">floating</a></li>
                                <li><a href="../demo/ACT_Demo_force_env.html">force_env</a></li>
                                <li><a href="../demo/ACT_Demo_html5_enabler.html">html5_enabler</a></li>
                                <li><a href="../demo/ACT_Demo_html5_standard.html">html5_standard</a></li>
                                <li><a href="../demo/ACT_Demo_icons.html">icons</a></li>
                                <li><a href="../demo/ACT_Demo_input_data.html">input_data</a></li>
                                <li><a href="../demo/ACT_Demo_login_html.html">login_html</a></li>
                                <li><a href="../demo/ACT_Demo_overwrite_env.html">overwrite_env</a></li>
                                <li><a href="../demo/ACT_Demo_splash_ad.html">splash_ad</a></li>
                                <li><a href="../demo/ACT_Demo_tablet_expandable.html">tablet_expandable</a></li>
                                <li><a href="../demo/ACT_Demo_video_event.html">video_event</a></li>
                                <li><a href="../demo/ACT_Demo_video_html.html">video_html</a></li>
                            </ul>
                
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/capabilities/ACT_contentYoutube.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
 * Copyright 2016, Yahoo Inc.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 */

/* global ACT */
/**
 * The &#x27;ContentYoutube&#x27; is a capability made to generate a &#x27;DIV&#x27; tag use as a container for the Youtube player.
 *
 * Available &#x27;actions&#x27;:
 * - youtubeStart
 * - youtubeStop
 * - youtubePlay
 * - youtubePause
 * - youtubeMute
 * - youtubeUnmute
 *
 * Available &#x27;triggers&#x27;:
 * - pause
 * - play
 * - complete
 * - error
 * - ready
 * - start
 * - 25percent
 * - 50percent
 * - 75percent
 *
 * Example of &#x27;SuperConf&#x27; use case:
 *
 *      {
 *          id: &#x27;youtube_player&#x27;,
 *          type: &#x27;content-youtube&#x27;,
 *          classNode: &#x27;youtube_class&#x27;,
 *          env: [&#x27;html&#x27;, &#x27;flash&#x27;],
 *          css: {
 *              width:&#x27;352px&#x27;,
 *              height:&#x27;198px&#x27;
 *          },
 *          youtubeConfig:{
 *              width: &#x27;100%&#x27;,
 *              height: &#x27;100%&#x27;,
 *              videoId: &#x27;GQQMLE4FuIQ&#x27;,
 *              suggestedQuality: &#x27;default&#x27;,
 *              playerVars: {
 *                  autoplay: 1,
 *                  controls: 1,
 *                  color: &#x27;white&#x27;,
 *                  disablekb: 1,
 *                  enablejsapi: 1,
 *                  fs: 1,
 *                  iv_load_policy: 3,
 *                  modestbranding: 0,
 *                  rel: 0,
 *                  showinfo: 0,
 *                  loop: 0
 *              }
 *          },
 *          eventActions: [{
 *              eventType: &#x27;start&#x27;,
 *              actions: [
 *                  {
 *                      type: &#x27;track&#x27;,
 *                      label: &#x27;start&#x27;
 *                  }
 *              ]
 *          }]
 *      }
 *
 * @module ContentYoutube
 * @main ContentYoutube
 * @class ContentYoutube
 * @requires Dom, lang, Event, Class, Capability
 * @global
 */
ACT.define(&#x27;ContentYoutube&#x27;, [/*@&lt;*/&#x27;Debug&#x27;, /*&gt;@*/ &#x27;Dom&#x27;, &#x27;Lang&#x27;, &#x27;Event&#x27;, &#x27;Class&#x27;, &#x27;Capability&#x27;], function (ACT) {
    &#x27;use strict&#x27;;

    /* Shorthand */
    var Dom = ACT.Dom;
    var Lang = ACT.Lang;
    var Event = ACT.Event;
    var Class = ACT.Class;
    var Capability = ACT.Capability;

    /**
     * Constant values
     */
    var QUEUE = [];
    var READY = false;
    var EXIST = false;
    var EVENT_YOUTUBE_START = &#x27;youtube:start&#x27;;
    var EVENT_YOUTUBE_STOP = &#x27;youtube:stop&#x27;;
    var EVENT_YOUTUBE_PLAY = &#x27;youtube:play&#x27;;
    var EVENT_YOUTUBE_PAUSE = &#x27;youtube:pause&#x27;;
    var EVENT_YOUTUBE_SOUNDON = &#x27;youtube:soundOn&#x27;;
    var EVENT_YOUTUBE_SOUNDOFF = &#x27;youtube:soundOff&#x27;;
    var EVENT_GLOBAL_ACTION_COMPLETE = &#x27;complete:action&#x27;;
    var EVENT_GLOBAL_STOP_CONTENT = &#x27;STOP_CONTENT&#x27;;
    var DEFAULT_CONFIG = {
        width: &#x27;100%&#x27;,
        height: &#x27;100%&#x27;,
        videoId: &#x27;GQQMLE4FuIQ&#x27;,
        suggestedQuality: &#x27;default&#x27;,
        playerVars: {
            autoplay: 1,
            controls: 1,
            color: &#x27;white&#x27;,
            disablekb: 1,
            enablejsapi: 1,
            fs: 1,
            iv_load_policy: 3,
            modestbranding: 0,
            rel: 0,
            showinfo: 0,
            loop: 0
        }
    };

    var DEFAULT_YOUTUBE_EVENT_ACTIONS = {
        pause: &#x27;pause&#x27;,
        play: &#x27;play&#x27;,
        complete: &#x27;complete&#x27;,
        error: &#x27;error&#x27;,
        ready: &#x27;ready&#x27;,
        start: &#x27;start&#x27;,
        &#x27;25percent&#x27;: &#x27;25percent&#x27;,
        &#x27;50percent&#x27;: &#x27;50percent&#x27;,
        &#x27;75percent&#x27;: &#x27;75percent&#x27;
    };

    var contentActions = [{
        type: &#x27;youtubeStart&#x27;,
        argument: {
            to: {
                name: &#x27;to&#x27;,
                test: function (to) {
                    return Lang.isString(to);
                }
            },
            timeout: {
              name: &#x27;timeout&#x27;,
              test: function (value) {
                return Lang.isNumber(value) || value === undefined || value === null;
              }
            }
        },
        process: function (actionId, args) {
            Event.fire(EVENT_YOUTUBE_START, {
                to: args.to
            });
            Event.fire(EVENT_GLOBAL_ACTION_COMPLETE, actionId);
        }
    }, {
        type: &#x27;youtubeStop&#x27;,
        argument: {
            to: {
                name: &#x27;to&#x27;,
                test: function (to) {
                    return Lang.isString(to);
                }
            },
            timeout: {
              name: &#x27;timeout&#x27;,
              test: function (value) {
                return Lang.isNumber(value) || value === undefined || value === null;
              }
            }
        },
        process: function (actionId, args) {
            Event.fire(EVENT_YOUTUBE_STOP, {
                to: args.to
            });
            Event.fire(EVENT_GLOBAL_ACTION_COMPLETE, actionId);
        }
    }, {
        type: &#x27;youtubePlay&#x27;,
        argument: {
            to: {
                name: &#x27;to&#x27;,
                test: function (to) {
                    return Lang.isString(to);
                }
            },
            timeout: {
              name: &#x27;timeout&#x27;,
              test: function (value) {
                return Lang.isNumber(value) || value === undefined || value === null;
              }
            }
        },
        process: function (actionId, args) {
            Event.fire(EVENT_YOUTUBE_PLAY, {
                to: args.to
            });
            Event.fire(EVENT_GLOBAL_ACTION_COMPLETE, actionId);
        }
    }, {
        type: &#x27;youtubePause&#x27;,
        argument: {
            to: {
                name: &#x27;to&#x27;,
                test: function (to) {
                    return Lang.isString(to);
                }
            },
            timeout: {
              name: &#x27;timeout&#x27;,
              test: function (value) {
                return Lang.isNumber(value) || value === undefined || value === null;
              }
            }
        },
        process: function (actionId, args) {
            Event.fire(EVENT_YOUTUBE_PAUSE, {
                to: args.to
            });
            Event.fire(EVENT_GLOBAL_ACTION_COMPLETE, actionId);
        }
    }, {
        type: &#x27;youtubeUnmute&#x27;,
        argument: {
            to: {
                name: &#x27;to&#x27;,
                test: function (to) {
                    return Lang.isString(to);
                }
            },
            timeout: {
              name: &#x27;timeout&#x27;,
              test: function (value) {
                return Lang.isNumber(value) || value === undefined || value === null;
              }
            }
        },
        process: function (actionId, args) {
            Event.fire(EVENT_YOUTUBE_SOUNDON, {
                to: args.to
            });
            Event.fire(EVENT_GLOBAL_ACTION_COMPLETE, actionId);
        }
    }, {
        type: &#x27;youtubeMute&#x27;,
        argument: {
            to: {
                name: &#x27;to&#x27;,
                test: function (to) {
                    return Lang.isString(to);
                }
            },
            timeout: {
              name: &#x27;timeout&#x27;,
              test: function (value) {
                return Lang.isNumber(value) || value === undefined || value === null;
              }
            }
        },
        process: function (actionId, args) {
            Event.fire(EVENT_YOUTUBE_SOUNDOFF, {
                to: args.to
            });
            Event.fire(EVENT_GLOBAL_ACTION_COMPLETE, actionId);
        }
    }];

    /*@&lt;*/
    var Debug = ACT.Debug;
    Debug.log(&#x27;[ ACT_contentYoutube.js ] ContentYoutube Loaded&#x27;);
    /*&gt;@*/

    window.onYouTubeIframeAPIReady = function () {
        var key;
        READY = true;

        for (key in QUEUE) {
            if (QUEUE.hasOwnProperty(key) &amp;&amp; Lang.isFunction(QUEUE[key])) {
                QUEUE[key]();
            }
        }

        QUEUE.length = 0;
    };

    /**
     * @constructor
     */
    function ContentYoutube(config) {
        this.init(config);
        // ContentYoutube.superclass.constructor.apply(this, arguments);
    }

    ContentYoutube.ATTRS = {

        /**
         * @attribute NAME
         * @type String
         */
        NAME: &#x27;ContentYoutube&#x27;,

        /**
         * @attribute version
         * @type String
         */
        version: &#x27;1.0.41&#x27;,

        /**
         * @attribute configObject
         * @type Object
         */
        configObject: {},

        /**
         * @attribute node
         * @type HTMLElement
         */
        node: null,

        /**
         * @attrbite store
         * @type array
         */
        store: []
    };

    /* Private methods */
    /**
     * Create youtube instance and enclose logic
     *
     * @method renderYoutube
     * @private
     * @param {Object} config
     * @param {Array} store
     * @param {Object} node
     * @return {Function}
     */
    function renderYoutube(config, store, node) {
        var youtubeConfig = Lang.merge(DEFAULT_CONFIG, (Lang.isObject(config.youtubeConfig)) ? config.youtubeConfig : {});

        return /* istanbul ignore next */ function () {
            // Default state
            var states = {
                start: false,
                &#x27;25percent&#x27;: false,
                &#x27;50percent&#x27;: false,
                &#x27;75percent&#x27;: false
            };
            var player;
            var time;
            var duration;
            var fireStore = function (name) {
                if (Lang.isFunction(store[name])) {
                    store[name]();
                }
            };

			function checkAndTrackQuartile(state) {
				states[state] = true;
				fireStore(state);
			}

            // Fake time update
            function timeUpdate() {
                config.requestID = Lang.requestAnimFrame(timeUpdate);

                if (!player || !Lang.isFunction(player.getCurrentTime) || !Lang.isFunction(player.getDuration)) {
                    return;
                }

                time = player.getCurrentTime();
                duration = player.getDuration();

                switch (Math.floor(time)) {
                    case Math.floor(duration * 0.25):
                        if (!states[&#x27;25percent&#x27;]) {
                            checkAndTrackQuartile(&#x27;25percent&#x27;);
                        }
                        break;
                    case Math.floor(duration * 0.50):
                        if (!states[&#x27;50percent&#x27;]) {
                            checkAndTrackQuartile(&#x27;50percent&#x27;);
                        }
                        break;
                    case Math.floor(duration * 0.75):
                        if (!states[&#x27;75percent&#x27;]) {
                            checkAndTrackQuartile(&#x27;75percent&#x27;);
                        }
                        break;
                    default:
                        break;
                }
            }

            function playAction() {
                fireStore(&#x27;play&#x27;);
                if (!states.start) {
                    checkAndTrackQuartile(&#x27;start&#x27;);
                }
                config.requestID = Lang.requestAnimFrame(timeUpdate);
            }

            function pauseAction() {
                Lang.cancelAnimFrame(config.requestID);
                fireStore(&#x27;pause&#x27;);
            }

            function completeAction() {
                states.start = false;
                states[&#x27;25percent&#x27;] = false;
                states[&#x27;50percent&#x27;] = false;
                states[&#x27;75percent&#x27;] = false;

                Lang.cancelAnimFrame(config.requestID);
                fireStore(&#x27;complete&#x27;);
            }

            // Dispatcher for listeners
            youtubeConfig.events = {
                onReady: function () {
                    fireStore(&#x27;ready&#x27;);
                },
                onError: function () {
                    fireStore(&#x27;error&#x27;);
                },
                onStateChange: function (event) {
                    switch (event.data) {
                        case 0: completeAction(); break;
                        case 1: playAction(); break;
                        case 2: pauseAction(); break;
                        default:
                            break;
                    }
                }
            };
            // Player instance
            player = new window.YT.Player(node, youtubeConfig);

            config.player = player;
        };
    }
    /**
     * Generate the node youtube
     *
     * @method renderNodeYoutube
     * @private
     * @param {Object} config
     * @return {HTMLElement}
     */
    function renderNodeYoutube(config, store) {
        // Parent node for actjs control
        var node = Dom.nodeCreate(&#x27;&lt;div id=&quot;&#x27; + config.id + &#x27;&quot;&gt;&lt;/div&gt;&#x27;).firstChild;
        var render;
        var head;
        var script;
        // Youtube node for youtube control
        var youtubeNode = Dom.nodeCreate(&#x27;&lt;div&gt;&lt;/div&gt;&#x27;).firstChild;

        // Youtube node can be ready for youtube before scaffolding occurs
        node.appendChild(youtubeNode);

        // Render youtube node and enclose logic
        render = renderYoutube(config, store, youtubeNode);

        // Append the youtube library only once
        if (!EXIST) {
            head = document.head || document.getElementsByTagName(&#x27;head&#x27;)[0];
            script = document.createElement(&#x27;script&#x27;);
            script.src = &#x27;https://www.youtube.com/iframe_api&#x27;;
            script.type = &#x27;text/javascript&#x27;;
            head.appendChild(script);

            EXIST = true;
        }

        if (!READY) {
            QUEUE.push(render);
        } else {
            render();
        }

        return node;
    }

    /**
     * Attach action for to a local store
     * @method attachAction
     * @private
     * @param {Object} event
     * @param {Array} store
     */
    function attachAction(event, store) {
        store[DEFAULT_YOUTUBE_EVENT_ACTIONS[event.eventType]] = function () {
            Event.fire(&#x27;add:actions&#x27;, event.actions);
        };
    }

    /**
     * Loop all video events and subscribe them
     * @method subscribeActionsToVideoEvents
     * @private
     * @param {Object} config
     * @param {Array} store
     * @return {Array} store
     */
    function subscribeActionsToVideoEvents(config, store) {
        var events = config.eventActions;
        var name;

        if (!Lang.isObject(events)) {
            return store;
        }

        for (name in events) {
            if (events.hasOwnProperty(name) &amp;&amp; DEFAULT_YOUTUBE_EVENT_ACTIONS.hasOwnProperty(events[name].eventType)) {
                attachAction(events[name], store);
            }
        }

        return store;
    }

    /* Public methods */
    Lang.extend(ContentYoutube, [Capability, Class], {
        /*@&lt;*/
        /**
         * Testing purpose only
         */
        subscribeActionsToVideoEvents: subscribeActionsToVideoEvents,
        /*&gt;@*/

        /**
         * Function auto initiated when the class is instantiated
         *
         * @method initializer
         * @public
         * @param {Object} config
         */
        initializer: function (config) {
            // Save config object
            this.set(&#x27;configObject&#x27;, config);

            // Register all events
            Event.fire(&#x27;register:Actions&#x27;, contentActions);

            // Create listeners actions
            this.initializeListeners();
        },

        /**
         * Function to initialize event listeners for this instance
         *
         * @method initializeListeners
         */
        initializeListeners: function () {
            var root = this;

            root.addEventListeners(
                Event.on(EVENT_YOUTUBE_START, function (eventData) {
                    if (root.get(&#x27;id&#x27;) === eventData.to) {
                        root.start();
                    }
                }),
                Event.on(EVENT_YOUTUBE_STOP, function (eventData) {
                    if (root.get(&#x27;id&#x27;) === eventData.to) {
                        root.stop();
                    }
                }),
                Event.on(EVENT_YOUTUBE_PLAY, function (eventData) {
                    if (root.get(&#x27;id&#x27;) === eventData.to) {
                        root.play();
                    }
                }),
                Event.on(EVENT_YOUTUBE_PAUSE, function (eventData) {
                    if (root.get(&#x27;id&#x27;) === eventData.to) {
                        root.pause();
                    }
                }),
                Event.on(EVENT_YOUTUBE_SOUNDON, function (eventData) {
                    if (root.get(&#x27;id&#x27;) === eventData.to) {
                        root.soundOn();
                    }
                }),
                Event.on(EVENT_YOUTUBE_SOUNDOFF, function (eventData) {
                    if (root.get(&#x27;id&#x27;) === eventData.to) {
                        root.soundOff();
                    }
                }),
                Event.on(EVENT_GLOBAL_STOP_CONTENT, function () {
                    root.stop();
                })
            );
        },

        /**
         * Function called when the instance is destroyed
         *
         * @method destructor
         * @public
         */
        destructor: function () {
            var node = this.get(&#x27;node&#x27;);
            var store = this.get(&#x27;store&#x27;);
            var player = this.get(&#x27;configObject&#x27;).player;
            var requestID = this.get(&#x27;configObject&#x27;).requestID;

            Lang.cancelAnimFrame(requestID);

            /* Destroy youtube player */
            if (player) {
                /* istanbul ignore next */ try {
                    player.destroy();
                } catch (error) {
                    /*@&lt;*/
                    Debug.log(&#x27;YOUTUBE Player error: &#x27;, error);
                    /*&gt;@*/
                }
            }

            /* Remove the node from the DOM */
            if (node &amp;&amp; node.parentNode) {
                node.parentNode.removeChild(node);
            }

            /* Empty store */
            store.length = 0;
        },

        /**
         * Render the node from given config object, environment and orientation state
         *
         * @method renderContent
         * @param {Object} configObject
         * @param {String} env
         * @param {String} orientation
         * @return {HTMLElement} node
         */
        renderContent: function (configObject) {
            var store = subscribeActionsToVideoEvents(configObject, this.get(&#x27;store&#x27;));
            var node = renderNodeYoutube(configObject, store);
            node = this.applyNodeConfig(node, configObject);
            return node;
        },

        /**
         * Function generating the youtube node
         *
         * @method getContent
         * @public
         * @param {String} env Environment for rendering content such as html/flash/backup
         * @param {String} orientation Orientation of current device such as landscape and portraits for mobile
         * @return {HTMLElement} node
         */
        getContent: function (env, orientation) {
            var node = this.renderContent(this.get(&#x27;configObject&#x27;), env, orientation);

            this.set(&#x27;node&#x27;, node);

            return {
                node: node
            };
        },

        /**
         * Start the video
         * @method start
         */
        start: function () {
            var player = this.get(&#x27;configObject&#x27;).player;

            if (player) {
                /* istanbul ignore next */ try {
                    player.seekTo(0);
                    player.playVideo();
                } catch (error) {
                    /*@&lt;*/
                    Debug.log(&#x27;YOUTUBE Player error: &#x27;, error);
                    /*&gt;@*/
                }
            }
        },

        /**
         * Stop the video
         * @method stop
         */
        stop: function () {
            var player = this.get(&#x27;configObject&#x27;).player;

            if (player) {
                /* istanbul ignore next */ try {
                    player.seekTo(0);
                    player.stopVideo();
                } catch (error) {
                    /*@&lt;*/
                    Debug.log(&#x27;YOUTUBE Player error: &#x27;, error);
                    /*&gt;@*/
                }
            }
        },

        /**
         * Play the video
         * @method play
         */
        play: function () {
            var player = this.get(&#x27;configObject&#x27;).player;

            if (player) {
                /* istanbul ignore next */ try {
                    player.playVideo();
                } catch (error) {
                    /*@&lt;*/
                    Debug.log(&#x27;YOUTUBE Player error: &#x27;, error);
                    /*&gt;@*/
                }
            }
        },

        /**
         * Pause the video
         * @method pause
         */
        pause: function () {
            var player = this.get(&#x27;configObject&#x27;).player;

            if (player) {
                /* istanbul ignore next */ try {
                    player.pauseVideo();
                } catch (error) {
                    /*@&lt;*/
                    Debug.log(&#x27;YOUTUBE Player error: &#x27;, error);
                    /*&gt;@*/
                }
            }
        },

        /**
         * Turn on the sound of the video
         * @method soundOn
         */
        soundOn: function () {
            var player = this.get(&#x27;configObject&#x27;).player;

            if (player) {
                /* istanbul ignore next */ try {
                    player.unMute();
                } catch (error) {
                    /*@&lt;*/
                    Debug.log(&#x27;YOUTUBE Player error: &#x27;, error);
                    /*&gt;@*/
                }
            }
        },

        /**
         * Turn off the sound of the video
         * @method soundOff
         */
        soundOff: function () {
            var player = this.get(&#x27;configObject&#x27;).player;

            if (player) {
                /* istanbul ignore next */ try {
                    player.mute();
                } catch (error) {
                    /*@&lt;*/
                    Debug.log(&#x27;YOUTUBE Player error: &#x27;, error);
                    /*&gt;@*/
                }
            }
        }
    });

    return ContentYoutube;
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
