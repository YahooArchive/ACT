<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/library/ACT_animation.js - ACT.js</title>
    <link rel="stylesheet" href="https://s.yimg.com/zz/combo?yui-s:3.14.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="https://s.yimg.com/rz/l/favicon.ico">
    <script src="https://s.yimg.com/zz/combo?yui-s:3.14.1/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="ACT.js" width="126" height="100"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.22</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                            <li><a href="#api-demos">Demo and Examples</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ACT.html">ACT</a></li>
                                <li><a href="../classes/ActionsQueue.html">ActionsQueue</a></li>
                                <li><a href="../classes/Base.html">Base</a></li>
                                <li><a href="../classes/Capability.html">Capability</a></li>
                                <li><a href="../classes/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../classes/Class.html">Class</a></li>
                                <li><a href="../classes/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../classes/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../classes/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../classes/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../classes/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../classes/ContentImage.html">ContentImage</a></li>
                                <li><a href="../classes/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../classes/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../classes/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../classes/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../classes/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../classes/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../classes/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../classes/Cookie.html">Cookie</a></li>
                                <li><a href="../classes/CustomData.html">CustomData</a></li>
                                <li><a href="../classes/Debug.html">Debug</a></li>
                                <li><a href="../classes/Dom.html">Dom</a></li>
                                <li><a href="../classes/DwellTime.html">DwellTime</a></li>
                                <li><a href="../classes/Enabler.html">Enabler</a></li>
                                <li><a href="../classes/Environment.html">Environment</a></li>
                                <li><a href="../classes/Event.html">Event</a></li>
                                <li><a href="../classes/Flash.html">Flash</a></li>
                                <li><a href="../classes/IO.html">IO</a></li>
                                <li><a href="../classes/Json.html">Json</a></li>
                                <li><a href="../classes/Lang.html">Lang</a></li>
                                <li><a href="../classes/LayersList.html">LayersList</a></li>
                                <li><a href="../classes/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../classes/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../classes/Screen.html">Screen</a></li>
                                <li><a href="../classes/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../classes/StandardAd.html">StandardAd</a></li>
                                <li><a href="../classes/Tracking.html">Tracking</a></li>
                                <li><a href="../classes/UA.html">UA</a></li>
                                <li><a href="../classes/Util.html">Util</a></li>
                                <li><a href="../classes/VideoEvents.html">VideoEvents</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ACT.html">ACT</a></li>
                                <li><a href="../modules/actionsQueue.html">actionsQueue</a></li>
                                <li><a href="../modules/Base.html">Base</a></li>
                                <li><a href="../modules/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../modules/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../modules/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../modules/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../modules/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../modules/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../modules/ContentImage.html">ContentImage</a></li>
                                <li><a href="../modules/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../modules/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../modules/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../modules/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../modules/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../modules/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../modules/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../modules/Cookie.html">Cookie</a></li>
                                <li><a href="../modules/DwellTime.html">DwellTime</a></li>
                                <li><a href="../modules/Enabler.html">Enabler</a></li>
                                <li><a href="../modules/environment.html">environment</a></li>
                                <li><a href="../modules/IO.html">IO</a></li>
                                <li><a href="../modules/LayersList.html">LayersList</a></li>
                                <li><a href="../modules/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../modules/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../modules/Screen.html">Screen</a></li>
                                <li><a href="../modules/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../modules/StandardAd.html">StandardAd</a></li>
                                <li><a href="../modules/Tracking.html">Tracking</a></li>
                            </ul>
                
                            <ul id="api-demos" class="apis demos">
                                <li><a href="../demo/ACT_Demo_300x250.html">300x250</a></li>
                                <li><a href="../demo/ACT_Demo_300x250_tracking.html">300x250_tracking</a></li>
                                <li><a href="../demo/ACT_Demo_TrackingExample.html">TrackingExample</a></li>
                                <li><a href="../demo/ACT_Demo_animation.html">animation</a></li>
                                <li><a href="../demo/ACT_Demo_billboard.html">billboard</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-enabler.html">billboard-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-expandable-enabler.html">billboard-expandable-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video.html">billboard_html_video</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video_rtl.html">billboard_html_video_rtl</a></li>
                                <li><a href="../demo/ACT_Demo_carousel.html">carousel</a></li>
                                <li><a href="../demo/ACT_Demo_dwelltime.html">dwelltime</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_expand.html">enabler_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_fullscreen_expand.html">enabler_fullscreen_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_target.html">enabler_target</a></li>
                                <li><a href="../demo/ACT_Demo_floating.html">floating</a></li>
                                <li><a href="../demo/ACT_Demo_force_env.html">force_env</a></li>
                                <li><a href="../demo/ACT_Demo_html5_enabler.html">html5_enabler</a></li>
                                <li><a href="../demo/ACT_Demo_html5_standard.html">html5_standard</a></li>
                                <li><a href="../demo/ACT_Demo_icons.html">icons</a></li>
                                <li><a href="../demo/ACT_Demo_input_data.html">input_data</a></li>
                                <li><a href="../demo/ACT_Demo_login_html.html">login_html</a></li>
                                <li><a href="../demo/ACT_Demo_overwrite_env.html">overwrite_env</a></li>
                                <li><a href="../demo/ACT_Demo_splash_ad.html">splash_ad</a></li>
                                <li><a href="../demo/ACT_Demo_tablet_expandable.html">tablet_expandable</a></li>
                                <li><a href="../demo/ACT_Demo_video_event.html">video_event</a></li>
                                <li><a href="../demo/ACT_Demo_video_html.html">video_html</a></li>
                            </ul>
                
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/library/ACT_animation.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
 * Copyright 2016, Yahoo Inc.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 */

/* global ACT */
ACT.define(&#x27;Animation&#x27;, [/*@&lt;*/&#x27;Debug&#x27;, /*&gt;@*/ &#x27;Dom&#x27;, &#x27;Lang&#x27;], function (ACT) {
    &#x27;use strict&#x27;;

    /* Constants */
    var Dom = ACT.Dom;
    var Lang = ACT.Lang;
    /**
     * Post-fix for css style attributes
     */
    var POSTFIX = {
        top: &#x27;px&#x27;,
        bottom: &#x27;px&#x27;,
        left: &#x27;px&#x27;,
        right: &#x27;px&#x27;,
        width: &#x27;px&#x27;,
        height: &#x27;px&#x27;,
        marginTop: &#x27;px&#x27;,
        marginBottom: &#x27;px&#x27;,
        marginLeft: &#x27;px&#x27;,
        marginRight: &#x27;px&#x27;,
        paddingTop: &#x27;px&#x27;,
        paddingBottom: &#x27;px&#x27;,
        paddingLeft: &#x27;px&#x27;,
        paddingRight: &#x27;px&#x27;,
        preset: &#x27;&#x27;
    };
    /*@&lt;*/
    var Debug = ACT.Debug;
    Debug.log(&#x27;Animation: loaded&#x27;);
    /*&gt;@*/

    /**
     * @constructor
     */
    function Animation() {
        /* istanbul ignore if */
        if (Animation.prototype.singleton) {
            return Animation.prototype.singleton;
        }
        Animation.prototype.singleton = this;
    }

    Animation.ATTRS = {

        /**
         * @attribute NAME
         * @type String
         */
        NAME: &#x27;Animation&#x27;,

        /**
         * @attribute version
         * @type String
         */
        version: &#x27;1.0.41&#x27;
    };

    /**
     * Core of the animation, containing setInterval loop
     * @param {Object} opts
     * @private
     */
    function animate(opts) {
        var requestID;
        var start = Lang.dateNow();
        var timeUpdate = function () {
            var delta;
            var timePassed = Lang.dateNow() - start;
            var progress = timePassed / opts.duration;

            requestID = Lang.requestAnimFrame(timeUpdate);

            if (progress &gt; 1) {
                progress = 1;
            }

            delta = opts.delta(progress);
            opts.step(delta);

            if (progress === 1) {
                Lang.cancelAnimFrame(requestID);
                opts.onComplete();
            }
        };

        requestID = Lang.requestAnimFrame(timeUpdate);
    }

    /**
     * Isolated context to execute an animation for only one css style attribute
     * @param {HTMLElement} element
     * @param {Sring} attr
     * @param {Number} from
     * @param {Number} to
     * @param {Number} duration
     * @param {Number} delay
     * @param {Function} callback
     * @param {Number} length
     * @param {Number} loop
     * @private
     */
     function attribute(element, attr, from, to, duration, onStart, onComplete, length, loop) {
        var type = POSTFIX.hasOwnProperty(attr) ? POSTFIX[attr] : POSTFIX.preset;

        from = parseInt(from, 10) || 0;
        to = parseInt(to, 10) || 0;

        if (Lang.isFunction(onStart)) {
            onStart();
        }

        animate({
            duration: duration || 1000,
            delta: function (p) {
                /**
                 * Check this tutorial to implement animation type
                 * http://javascript.info/tutorial/animation
                 */
                return p;
            },
            step: function (delta) {
                var result = (to - from) * delta + from;
                element.style[attr] = result + type;
            },
            onComplete: function (res) {
                if (Lang.isFunction(onComplete)) {
                    if (length === loop) {
                        onComplete(res);
                    }
                }
            }
        });
    }

    Animation.prototype = {

        constructor: Animation,

        /**
         * Filter method for the core animation, able to receive a group animation
         * @param {HTMLElement} element can be a string
         * @param {Object} from or to
         * @param {Object} to
         * @param {Object} duration
         * @param {Object} delay
         * @param {Function} onStart callback executed when the group of anim starts
         * @param {Function} onComplete callback executed when the group of anim complete
         * @method anim
         * @public
         */
        /* jshint maxparams: 7 */
        anim: function (element, from, to, duration, delay, onStart, onComplete) {
            var timeout;
            var t;

            // Get the node if the param is the id as string
            if (Lang.isString(element)) {
                element = Dom.byId(element);
            }

            // To become From and From the original style values if the third args is no set
            if (!Lang.isObject(to) || !to) {
                to = from;
                from = {};

                for (t in to) {
                    if (to.hasOwnProperty(t)) {
                        from[t] = element.style[t];
                    }
                }
            }

            // Loop through style attributes for a group of anim
            if (Lang.isObject(from)) {
                // Check if there is a delay
                timeout = setTimeout(function () {
                    var loop = 1;
                    var length = Lang.size(from);
                    var f;
                    for (f in from) {
                        if (from.hasOwnProperty(f)) {
                            attribute(element, f, from[f], to[f], duration, onStart, onComplete, length, loop);
                            loop++;
                        }
                    }
                    clearTimeout(timeout);
                }, delay || 0);
            }
        }
    };

    return new Animation();
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
