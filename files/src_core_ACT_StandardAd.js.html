<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/core/ACT_StandardAd.js - ACT.js</title>
    <link rel="stylesheet" href="https://s.yimg.com/zz/combo?yui-s:3.14.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="https://s.yimg.com/rz/l/favicon.ico">
    <script src="https://s.yimg.com/zz/combo?yui-s:3.14.1/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="https://s.yimg.com/cv/ae/global/ACTJS/logo/ACT.js.logo.png" title="ACT.js" width="126" height="100"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.22</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                            <li><a href="#api-demos">Demo and Examples</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ACT.html">ACT</a></li>
                                <li><a href="../classes/ActionsQueue.html">ActionsQueue</a></li>
                                <li><a href="../classes/Base.html">Base</a></li>
                                <li><a href="../classes/Capability.html">Capability</a></li>
                                <li><a href="../classes/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../classes/Class.html">Class</a></li>
                                <li><a href="../classes/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../classes/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../classes/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../classes/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../classes/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../classes/ContentImage.html">ContentImage</a></li>
                                <li><a href="../classes/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../classes/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../classes/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../classes/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../classes/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../classes/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../classes/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../classes/Cookie.html">Cookie</a></li>
                                <li><a href="../classes/CustomData.html">CustomData</a></li>
                                <li><a href="../classes/Debug.html">Debug</a></li>
                                <li><a href="../classes/Dom.html">Dom</a></li>
                                <li><a href="../classes/DwellTime.html">DwellTime</a></li>
                                <li><a href="../classes/Enabler.html">Enabler</a></li>
                                <li><a href="../classes/Environment.html">Environment</a></li>
                                <li><a href="../classes/Event.html">Event</a></li>
                                <li><a href="../classes/Flash.html">Flash</a></li>
                                <li><a href="../classes/IO.html">IO</a></li>
                                <li><a href="../classes/Json.html">Json</a></li>
                                <li><a href="../classes/Lang.html">Lang</a></li>
                                <li><a href="../classes/LayersList.html">LayersList</a></li>
                                <li><a href="../classes/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../classes/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../classes/Screen.html">Screen</a></li>
                                <li><a href="../classes/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../classes/StandardAd.html">StandardAd</a></li>
                                <li><a href="../classes/Tracking.html">Tracking</a></li>
                                <li><a href="../classes/UA.html">UA</a></li>
                                <li><a href="../classes/Util.html">Util</a></li>
                                <li><a href="../classes/VideoEvents.html">VideoEvents</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ACT.html">ACT</a></li>
                                <li><a href="../modules/actionsQueue.html">actionsQueue</a></li>
                                <li><a href="../modules/Base.html">Base</a></li>
                                <li><a href="../modules/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../modules/ContentAdfeedback.html">ContentAdfeedback</a></li>
                                <li><a href="../modules/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../modules/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../modules/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../modules/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../modules/ContentImage.html">ContentImage</a></li>
                                <li><a href="../modules/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../modules/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../modules/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../modules/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../modules/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../modules/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../modules/ContentYtv.html">ContentYtv</a></li>
                                <li><a href="../modules/Cookie.html">Cookie</a></li>
                                <li><a href="../modules/DwellTime.html">DwellTime</a></li>
                                <li><a href="../modules/Enabler.html">Enabler</a></li>
                                <li><a href="../modules/environment.html">environment</a></li>
                                <li><a href="../modules/IO.html">IO</a></li>
                                <li><a href="../modules/LayersList.html">LayersList</a></li>
                                <li><a href="../modules/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../modules/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../modules/Screen.html">Screen</a></li>
                                <li><a href="../modules/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../modules/StandardAd.html">StandardAd</a></li>
                                <li><a href="../modules/Tracking.html">Tracking</a></li>
                            </ul>
                
                            <ul id="api-demos" class="apis demos">
                                <li><a href="../demo/ACT_Demo_300x250.html">300x250</a></li>
                                <li><a href="../demo/ACT_Demo_300x250_tracking.html">300x250_tracking</a></li>
                                <li><a href="../demo/ACT_Demo_TrackingExample.html">TrackingExample</a></li>
                                <li><a href="../demo/ACT_Demo_animation.html">animation</a></li>
                                <li><a href="../demo/ACT_Demo_billboard.html">billboard</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-enabler.html">billboard-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-expandable-enabler.html">billboard-expandable-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video.html">billboard_html_video</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video_rtl.html">billboard_html_video_rtl</a></li>
                                <li><a href="../demo/ACT_Demo_carousel.html">carousel</a></li>
                                <li><a href="../demo/ACT_Demo_dwelltime.html">dwelltime</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_expand.html">enabler_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_fullscreen_expand.html">enabler_fullscreen_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_target.html">enabler_target</a></li>
                                <li><a href="../demo/ACT_Demo_floating.html">floating</a></li>
                                <li><a href="../demo/ACT_Demo_force_env.html">force_env</a></li>
                                <li><a href="../demo/ACT_Demo_html5_enabler.html">html5_enabler</a></li>
                                <li><a href="../demo/ACT_Demo_html5_standard.html">html5_standard</a></li>
                                <li><a href="../demo/ACT_Demo_icons.html">icons</a></li>
                                <li><a href="../demo/ACT_Demo_input_data.html">input_data</a></li>
                                <li><a href="../demo/ACT_Demo_login_html.html">login_html</a></li>
                                <li><a href="../demo/ACT_Demo_overwrite_env.html">overwrite_env</a></li>
                                <li><a href="../demo/ACT_Demo_splash_ad.html">splash_ad</a></li>
                                <li><a href="../demo/ACT_Demo_tablet_expandable.html">tablet_expandable</a></li>
                                <li><a href="../demo/ACT_Demo_video_event.html">video_event</a></li>
                                <li><a href="../demo/ACT_Demo_video_html.html">video_html</a></li>
                            </ul>
                
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/core/ACT_StandardAd.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
 * Copyright 2016, Yahoo Inc.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 */

/* global ACT, window */
ACT.define(&#x27;StandardAd&#x27;, [/*@&lt;*/&#x27;Debug&#x27;, /*&gt;@*/ &#x27;Lang&#x27;, &#x27;Event&#x27;, &#x27;Class&#x27;, &#x27;Environment&#x27;, &#x27;LayersList&#x27;, &#x27;Screen&#x27;], function (ACT) {
    &#x27;use strict&#x27;;
    /* Shorthand */
    var Lang = ACT.Lang;
    var Event = ACT.Event;
    var Class = ACT.Class;
    var Env = ACT.Environment;
    var LayersList = ACT.LayersList;
    var Screen = ACT.Screen;

    /*@&lt;*/
    var Debug = ACT.Debug;
    /*&gt;@*/

    var EVENT_GLOBAL_CHECK_ACTION_CONDITION = &#x27;standardAd:checkActionCondition&#x27;;

    var actions = [{
        type: &#x27;replayAd&#x27;,
        argument: {
            timeout: {
                name: &#x27;timeout&#x27;,
                test: function (value) {
                    return Lang.isNumber(value) || value === undefined || value === null;
                }
            }
        },
        process: function (actionId) {
            /* check argumments */

            /* stop any counter running */
            Event.fire(&#x27;adProduct:stopCounter&#x27;);

            Event.fire(&#x27;layerList:resetInlineFrame&#x27;);

            /* layers close all open */
            Event.fire(&#x27;layerList:stopAllLayers&#x27;);

            /* start ad again */
            Event.fire(&#x27;adProduct:playAd&#x27;, {
                forceFirstPlay: true
            });

            /* this action remove itself */
            Event.fire(&#x27;complete:action&#x27;, actionId);
        }
    }, {
        type: &#x27;stopProcesses&#x27;,
        argument: {
            timeout: {
                name: &#x27;timeout&#x27;,
                test: function (value) {
                    return Lang.isNumber(value) || value === undefined || value === null;
                }
            }
        },
        process: function (actionId) {
            Event.fire(&#x27;adProduct:stopCounter&#x27;);
            Event.fire(&#x27;complete:action&#x27;, actionId);
        }
    }];

    /**
     * @attribute activeCounters
     * @private
     * @static
     * @type Array
     */
    var activeCounters = [];

    /**
     * @class StandardAd
     * @module StandardAd
     * @param {Object} config
     */
    function StandardAd(config) {
        this.init(config);
    }

    /**
     * Class&#x27; attribute list
     */
    StandardAd.ATTRS = {
        NAME: &#x27;StandardAd&#x27;,
        version: &#x27;1.0.41&#x27;,

        /**
         * @attribute baseConfig
         */
        baseConfig: &#x27;&#x27;,

        /**
         * @attribute trackingConfig
         */
        tracking: &#x27;&#x27;,

        /**
         * @attribute format
         */
        format: &#x27;&#x27;,

        /**
         * @attribute sDarlaAPI
         */
        sDarlaAPI: undefined,

        /**
         * @attribute sDarlaKey
         */
        sDarlaKey: undefined,

        /**
         * @attribute firstPlay
         */
        firstPlay: true,

        /**
         * @attribute adEnvToPlay
         */
        adEnvToPlay: undefined,

        /**
         * Current screen status
         * @attribute status
         */
        status: {},

        /**
         * @attribute states
         */
        states: [],

        /**
         * @attribute isCookieAvailable
         */
        isCookieAvailable: true

    };

    /**
     * Class prototypes
     */
    Lang.extend(StandardAd, Class, {
        /*@&lt;*/
        activeCounters: activeCounters,
        /*&gt;@*/

        initializer: function (config) {
            var root = this;

            if (&#x27;parent&#x27; in config) {
                Lang.mix(this, config.parent);
            }

            this.setAttrs(this.config);

            /* Check that registration is complete and carry on */
            this.addEventListeners(
                Event.on(&#x27;localRegister:registerAd:complete&#x27;, function (data) {
                    /*@&lt;*/
                    Debug.log(&#x27;[ ACT_StandardAd.js ] : localRegister:registerAd:complete&#x27;, data);
                    /*&gt;@*/

                    /* If returned cookie status is not equal to 0 then we have no cookie support */
                    if (data.status !== 0) {
                        /* if there is error doing something */
                        root.set(&#x27;isCookieAvailable&#x27;, false);
                    } else {
                        root.set(&#x27;firstPlay&#x27;, data.firstPlay);
                        root.set(&#x27;states&#x27;, data.states);
                    }

                    root.addEventListeners(
                        Event.on(&#x27;adProduct:playAd&#x27;, function (onData) {
                            root.onReady(onData.forceFirstPlay);
                        }),

                        Event.on(&#x27;adProduct:stopCounter&#x27;, function () {
                            root.stopCounter();
                        }),

                        Event.on(&#x27;adProduct:getDarlaAPI&#x27;, function () {
                            Event.fire(&#x27;adProduct:getDarlaAPI:done&#x27;, {
                                sDarlaAPI: root.get(&#x27;sDarlaAPI&#x27;)
                            });
                        })
                    );

                    /* initialize modules */
                    root.startScreen();
                    root.startLayers();
                    root.onReady(false);

                    /* register ad actions into queue, last part */
                    Event.fire(&#x27;register:Actions&#x27;, actions);
                })
            );

            root.initializeEvents();

            /* start ad */
            root.startAd();

            /*@&lt;*/
            Debug.log(&#x27;[ ACT_StandardAd.js ] &quot;this&quot;:&#x27;, this);
            /*&gt;@*/
        },

        /**
         * @method initializeEvents
         */
        initializeEvents: function () {
            var root = this;
            root.addEventListeners(
                Event.on(EVENT_GLOBAL_CHECK_ACTION_CONDITION, function (eventData) {
                    eventData.callback(root.isExecutable(eventData.actionConfig));
                })
            );
        },

        /**
         * @method startAd
         */
        startAd: function () {
            var root = this;
            root.startEnv();
            /* start the ad by registering its into cookie and wait for response from cookie */
            Event.fire(&#x27;localRegister:registerAd&#x27;, {
                adId: root.get(&#x27;adId&#x27;)
            });
        },

        /**
         * @method setActionTimeout
         */
        setActionTimeout: function () {
            var actionTimeout = this.get(&#x27;baseConfig&#x27;).actionTimeout;
            if (actionTimeout !== undefined &amp;&amp; Lang.isNumber(actionTimeout)) {
                Event.fire(&#x27;setTimeout:action&#x27;, { actionTimeout: actionTimeout });
            }
        },

        /**
         * @method startEnv
         */
        startEnv: function () {
            var ev = new Env({
                forceEnv: this.get(&#x27;baseConfig&#x27;).forceEnv
            });
            var env = ev.checkEnv();
            this.set(&#x27;adEnvToPlay&#x27;, env);
        },

        /**
         * Initialize Fresco screen instance
         *
         * @method startScreen
         */
        startScreen: function () {
            var attr = {
                sDarlaAPI: this.get(&#x27;sDarlaAPI&#x27;)
            };
            var screenM = new Screen(attr);
            /*@&lt;*/
            Debug.log(&#x27;[ ACT_StandardAd.js ] : startScreen&#x27;);
            /*&gt;@*/
            this.set(&#x27;status&#x27;, screenM.get(&#x27;status&#x27;));
        },

        /**
         * @method startLayers
         */
        startLayers: function (layers) {
            var root = this;
            var layersConfig = this.get(&#x27;format&#x27;).layers || layers;
            var layersSet = new LayersList({
                layersConfig: layersConfig,
                sDarlaAPI: root.get(&#x27;sDarlaAPI&#x27;),
                envToPlay: root.get(&#x27;adEnvToPlay&#x27;),
                status: root.get(&#x27;status&#x27;)
            });

            this.set(&#x27;layersRef&#x27;, layersSet);
        },

        /**
         * Start rendering the ad after all pre-rent works have done
         *
         * @method onReady
         */
        onReady: function (forceFirstPlay) {
            var root = this;
            var actionsExecuted;
            var statePlay = (forceFirstPlay || root.get(&#x27;firstPlay&#x27;)) ? &#x27;firstPlay&#x27; : &#x27;cappedPlay&#x27;;

            /*@&lt;*/
            Debug.log(&#x27;[ ACT_StandardAd.js ] statePlay : &#x27;, statePlay);
            /*&gt;@*/

            if (!root.get(&#x27;format&#x27;).flow) {
                /*@&lt;*/
                Debug.warn(&#x27;[ ACT_StandardAd.js ] : adproduct, onReady method, error = flow is not set, nothing will be played&#x27;);
                /*&gt;@*/
                return;
            }

            root.setActionTimeout();

            /* execute flow actions */
            actionsExecuted = root.executeFlow(root.get(&#x27;format&#x27;).flow, statePlay);

            /* if no action is executed and we are in capped play, then re-check all actions with force first play */
            if (!actionsExecuted &amp;&amp; statePlay === &#x27;cappedPlay&#x27;) {
                /*@&lt;*/
                Debug.log(&#x27;[ ACT_StandardAd.js ] re-do flow with force first play &#x27;);
                /*&gt;@*/
                root.onReady(true);
            }
        },

        /**
         * @method executeFlow
         */
        executeFlow: function (flow, statePlay) {
            var root = this;
            /* flag to mark if any actions has been executed */
            var actionsExecuted = false;
            var i;
            for (i = 0; i &lt; flow.length; i++) {
                actionsExecuted = root.executeFlowActions(flow[i], statePlay) || actionsExecuted;
            }
            return actionsExecuted;
        },

        /**
         * @method executeFlowActions
         */
        executeFlowActions: function (flowConfig, statePlay) {
            var root = this;

            if (flowConfig.eventType === statePlay) {
                /* Confirm that this flow is ok to execute */
                if (root.isExecutable(flowConfig)) {
                    /* if &#x27;timeTo&#x27; is defined, then add all of the actions to counter, and delay execution appropriately */
                    if (Lang.objHasKey(flowConfig, &#x27;timeTo&#x27;) &amp;&amp; flowConfig.timeTo !== &#x27;&#x27;) {
                        root.addCounterTrigger(flowConfig);
                    } else {
                        /* if no &#x27;timeTo&#x27; is defined, then proceed with standard execution - if allowed to play */
                        Event.fire(&#x27;add:actions&#x27;, flowConfig.actions);
                    }
                    /* some actions has been executed */
                    return true;
                }
            }

            /* no action can be executed */
            return false;
        },

        /**
         * Check the doIf conditional, also confirm that the environment we are served in is allowed to play out our action.
         * @method isExecutable
         */
        isExecutable: function (flowConfig) {
            var executable = true;
            var conditions;
            var conditionCheck;
            var key;

            if (Lang.isArray(flowConfig.env)) {
				executable = Lang.inArray(flowConfig.env, this.get(&#x27;adEnvToPlay&#x27;)) || false;
            }

            /* if there are no conditionals then it&#x27;s ok to execute */
            if (Lang.isObject(flowConfig.doIf) &amp;&amp; !Lang.isObjectEmpty(flowConfig.doIf) &amp;&amp; executable === true) {
				/* if there is doIf then check all conditions inside it */
				conditions = flowConfig.doIf;
				conditionCheck = {
					state: Lang.bind(this, null, this.isStateMatch),
					cookie: Lang.bind(this, null, this.isCookieMatch),
					date: Lang.bind(this, null, this.isDateMatch)
				};
				/* run through all conditions and check them with relevance functions */
				for (key in conditions) {
					if (Lang.objHasKey(conditions, key) &amp;&amp; Lang.objHasKey(conditionCheck, key)) {
						executable = conditionCheck[key](conditions[key]);
						/* stop checking when there is one condition not match */
						if (executable === false) {
							/* istanbul ignore else */
							break;
						}
					}
				}
			}

            return executable;
        },

        /**
         * Checking if given state is matched with saved state from cookie
         *
         * @method isStateMatch
         * @param {Object} stateCondition State to be checked, should be object with format {id: [state_id], value: [state_value]}
         * @return {Boolean} true if given state is match with saved state
         */
        isStateMatch: function (stateCondition) {
            var states = this.get(&#x27;states&#x27;);
            var stateID = stateCondition.id;
            var stateValue = stateCondition.value;
            var id;
            /*@&lt;*/
            Debug.log(&#x27;[ ACT_StandardAd.js ]: state from cookies: &#x27;, states);
            /*&gt;@*/

            for (id in states) {
                /* istanbul ignore else */
                if (states.hasOwnProperty(id)) {
                    if (stateID !== id || stateValue !== states[id]) {
                        return false;
                    }
                }
            }

            return true;
        },

        /**
         * Checking if cookieCondition is matching with current cookie state given by cookie module
         * @method isCookieMatch
         */
        isCookieMatch: function (cookieCondition) {
            return cookieCondition === this.get(&#x27;isCookieAvailable&#x27;);
        },

        /**
         * Checking dateCondition config with current date
         *
         * @method isDateMatch
         * @param {Object} dateCondition Config object for date condition. The object can have &#x27;from&#x27; and &#x27;to&#x27; attribute to set the date range
         * @return {Boolean} true of current date is in the date range
         */
        isDateMatch: function (dateCondition) {
            var isMatch = true;
            var now = Date.now();
            var from;
            var to;

            /* doing nothing if dateCondition is not an object */
            if (!Lang.isObject(dateCondition)) {
                return true;
            }

            /* if condition has from attribute then current date must greater or equal from time */
            if (Lang.objHasKey(dateCondition, &#x27;from&#x27;)) {
                from = new Date(dateCondition.from);

                /*@&lt;*/
                if (isNaN(from.getTime())) {
                    Debug.warn(&#x27;[ ACT_StandardAd.js ] : wrong date format for &quot;from&quot;. Please follow the format &quot;July 13, 2015 00:00:00&quot;&#x27;);
                }
                /*&gt;@*/

                isMatch = isMatch &amp;&amp; ((now - from) / 1000) &gt;= 0;
            }

            /* if condition has to attribute then current date must smaller or equal from time */
            if (Lang.objHasKey(dateCondition, &#x27;to&#x27;)) {
                to = new Date(dateCondition.to);

                /*@&lt;*/
                /* istanbul ignore next */
                if (isNaN(to.getTime())) {
                    Debug.warn(&#x27;[ ACT_StandardAd.js ] : wrong date format for &quot;to&quot;. Please follow the format &quot;July 13, 2015 00:00:00&quot;&#x27;);
                }
                /*&gt;@*/

                isMatch = isMatch &amp;&amp; ((to - now) / 1000) &gt;= 0;
            }

            return isMatch;
        },

        /**
         * @method addCounterTrigger
         */
        addCounterTrigger: function (actionToAdd) {
            // TODO check for requestframe API //
            // TODo validate attrs
            var time = parseInt(actionToAdd.timeTo, 10) * 1000;
            var action = actionToAdd.actions;
            /* gets one actions */
			var counter = setInterval(
				/* istanbul ignore next */
				function () {
					window.clearInterval(counter);
					Event.fire(&#x27;add:actions&#x27;, action);
			}, time);
			activeCounters.push(counter);
			return activeCounters;
            // listen for a stopAllProcess event
            // check if there&#x27;s a counter otherwise
        },

        /**
         * @method stopCounter
         */
        stopCounter: function () {
            /* run array and shot anything there */
            while (activeCounters.length &gt; 0) {
                window.clearInterval(activeCounters.pop());
            }
        }
    });

    return StandardAd;
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
