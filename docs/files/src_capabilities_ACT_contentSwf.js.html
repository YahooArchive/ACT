<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/capabilities/ACT_contentSwf.js - ACT.js</title>
    <link rel="stylesheet" href="https://s.yimg.com/zz/combo?yui-s:3.14.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="https://s.yimg.com/rz/l/favicon.ico">
    <script src="https://s.yimg.com/zz/combo?yui-s:3.14.1/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="https://s.yimg.com/cv/ae/global/ACTJS/logo/ACT.js.logo.png" title="ACT.js" width="150"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.1.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                            <li><a href="#api-demos">Demo and Examples</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ACT.html">ACT</a></li>
                                <li><a href="../classes/ActionsQueue.html">ActionsQueue</a></li>
                                <li><a href="../classes/Base.html">Base</a></li>
                                <li><a href="../classes/Capability.html">Capability</a></li>
                                <li><a href="../classes/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../classes/Class.html">Class</a></li>
                                <li><a href="../classes/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../classes/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../classes/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../classes/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../classes/ContentImage.html">ContentImage</a></li>
                                <li><a href="../classes/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../classes/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../classes/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../classes/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../classes/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../classes/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../classes/Cookie.html">Cookie</a></li>
                                <li><a href="../classes/CustomData.html">CustomData</a></li>
                                <li><a href="../classes/Debug.html">Debug</a></li>
                                <li><a href="../classes/Dom.html">Dom</a></li>
                                <li><a href="../classes/DwellTime.html">DwellTime</a></li>
                                <li><a href="../classes/Enabler.html">Enabler</a></li>
                                <li><a href="../classes/EnablerADTECH.html">EnablerADTECH</a></li>
                                <li><a href="../classes/EnablerConfig.html">EnablerConfig</a></li>
                                <li><a href="../classes/Environment.html">Environment</a></li>
                                <li><a href="../classes/Event.html">Event</a></li>
                                <li><a href="../classes/Flash.html">Flash</a></li>
                                <li><a href="../classes/IO.html">IO</a></li>
                                <li><a href="../classes/Json.html">Json</a></li>
                                <li><a href="../classes/Lang.html">Lang</a></li>
                                <li><a href="../classes/LayersList.html">LayersList</a></li>
                                <li><a href="../classes/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../classes/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../classes/Screen.html">Screen</a></li>
                                <li><a href="../classes/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../classes/StandardAd.html">StandardAd</a></li>
                                <li><a href="../classes/Tracking.html">Tracking</a></li>
                                <li><a href="../classes/UA.html">UA</a></li>
                                <li><a href="../classes/Util.html">Util</a></li>
                                <li><a href="../classes/VideoEvents.html">VideoEvents</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ACT.html">ACT</a></li>
                                <li><a href="../modules/actionsQueue.html">actionsQueue</a></li>
                                <li><a href="../modules/Base.html">Base</a></li>
                                <li><a href="../modules/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../modules/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../modules/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../modules/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../modules/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../modules/ContentImage.html">ContentImage</a></li>
                                <li><a href="../modules/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../modules/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../modules/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../modules/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../modules/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../modules/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../modules/Cookie.html">Cookie</a></li>
                                <li><a href="../modules/DwellTime.html">DwellTime</a></li>
                                <li><a href="../modules/Enabler.html">Enabler</a></li>
                                <li><a href="../modules/EnablerADTECH.html">EnablerADTECH</a></li>
                                <li><a href="../modules/environment.html">environment</a></li>
                                <li><a href="../modules/IO.html">IO</a></li>
                                <li><a href="../modules/LayersList.html">LayersList</a></li>
                                <li><a href="../modules/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../modules/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../modules/Screen.html">Screen</a></li>
                                <li><a href="../modules/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../modules/StandardAd.html">StandardAd</a></li>
                                <li><a href="../modules/Tracking.html">Tracking</a></li>
                            </ul>
                
                            <ul id="api-demos" class="apis demos">
                                <li><a href="../demo/ACT_Demo_300x250.html">300x250</a></li>
                                <li><a href="../demo/ACT_Demo_300x250_tracking.html">300x250_tracking</a></li>
                                <li><a href="../demo/ACT_Demo_TrackingExample.html">TrackingExample</a></li>
                                <li><a href="../demo/ACT_Demo_animation.html">animation</a></li>
                                <li><a href="../demo/ACT_Demo_billboard.html">billboard</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-enabler.html">billboard-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-expandable-enabler.html">billboard-expandable-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video.html">billboard_html_video</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video_rtl.html">billboard_html_video_rtl</a></li>
                                <li><a href="../demo/ACT_Demo_carousel.html">carousel</a></li>
                                <li><a href="../demo/ACT_Demo_dwelltime.html">dwelltime</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_expand.html">enabler_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_fullscreen_expand.html">enabler_fullscreen_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_target.html">enabler_target</a></li>
                                <li><a href="../demo/ACT_Demo_floating.html">floating</a></li>
                                <li><a href="../demo/ACT_Demo_force_env.html">force_env</a></li>
                                <li><a href="../demo/ACT_Demo_html5_enabler.html">html5_enabler</a></li>
                                <li><a href="../demo/ACT_Demo_html5_standard.html">html5_standard</a></li>
                                <li><a href="../demo/ACT_Demo_icons.html">icons</a></li>
                                <li><a href="../demo/ACT_Demo_input_data.html">input_data</a></li>
                                <li><a href="../demo/ACT_Demo_login_html.html">login_html</a></li>
                                <li><a href="../demo/ACT_Demo_overwrite_env.html">overwrite_env</a></li>
                                <li><a href="../demo/ACT_Demo_splash_ad.html">splash_ad</a></li>
                                <li><a href="../demo/ACT_Demo_tablet_expandable.html">tablet_expandable</a></li>
                                <li><a href="../demo/ACT_Demo_video_event.html">video_event</a></li>
                                <li><a href="../demo/ACT_Demo_video_html.html">video_html</a></li>
                            </ul>
                
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/capabilities/ACT_contentSwf.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
 * Copyright 2016, Yahoo Inc.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 */

/* global ACT */
/**
 * The &#x27;ContentSwf&#x27; is a capability made to generate a &#x27;EMBED&#x27; or &#x27;OBJECT&#x27; tag.
 *
 * Example of &#x27;SuperConf&#x27; use case:
 *
 *	{
 *		id: &#x27;mpu_swf&#x27;,
 *		type: &#x27;content-swf&#x27;,
 *		classNode: &#x27;mpu_swf_class&#x27;,
 *		env: [&#x27;flash&#x27;],
 *		css: {},
 *		swfConfig: {
 *			src: &#x27;&#x27;,
 *			width: 300,
 *			height: 250,
 *			flashvars: {
 *				clickTAG: &#x27;https://www.yahoo.com&#x27;
 *			}
 *		}
 *	}
 *
 * @module ContentSwf
 * @main ContentSwf
 * @class ContentSwf
 * @requires Dom, Lang, Event, Class, Capability, Flash, SWFBridge
 * @global
 */
ACT.define(&#x27;ContentSwf&#x27;, [/*@&lt;*/&#x27;Debug&#x27;, /*&gt;@*/ &#x27;Dom&#x27;, &#x27;Lang&#x27;, &#x27;Event&#x27;, &#x27;Class&#x27;, &#x27;Capability&#x27;, &#x27;Flash&#x27;, &#x27;SWFBridge&#x27;], function (ACT) {
	&#x27;use strict&#x27;;

	/* Shorthand */
	var Dom = ACT.Dom;
	var Lang = ACT.Lang;
	var Class = ACT.Class;
	var Flash = ACT.Flash;
	var Event = ACT.Event;
	var Capability = ACT.Capability;
	var SWFBridge = ACT.SWFBridge;

	/* Constants */
	var EVENT_GLOBAL_SCREEN_STATUS = &#x27;screen:status&#x27;;
	var EVENT_GLOBAL_STOP_CONTENT = &#x27;STOP_CONTENT&#x27;;

	/*@&lt;*/
	var Debug = ACT.Debug;
	Debug.log(&#x27;ContentSwf Loaded&#x27;);
	/*&gt;@*/

	/**
	 * @constructor
	 */
	function ContentSwf(config) {
		this.init(config);
		// ContentSwf.superclass.constructor.apply(this, arguments);
	}

	ContentSwf.ATTRS = {

		/**
		 * @attribute NAME
		 * @type String
		 */
		NAME: &#x27;contentSwf&#x27;,

		/**
		 * @attribute configObject
		 * @type Object
		 */
		configObject: {},

		/**
		 * @attribute node
		 * @type HTMLElement
		 */
		node: null
	};

	/* Private methods */

	/**
     * Generate the node embed or object tag with params
     *
     * @method renderNodeObjectOrEmbed
     * @private
     * @param {Object} config
     * @return {HTMLElement}
     */
	function renderNodeObjectOrEmbed(config) {
		var swfId;
		if (!config.swfConfig.hasOwnProperty(&#x27;flashvars&#x27;)) {
			config.swfConfig.flashvars = {};
		}

		swfId = config.id || &#x27;swf&#x27; + Math.round((Math.random() * 1000000));
		config.swfConfig.id = config.swfConfig.flashvars.swfId = swfId;

		config.swfConfig.flashvars.callback = &#x27;eventHandler&#x27;;
		config.swfConfig.flashvars.callscope = &#x27;ACT.SWFBridge[&quot;&#x27; + swfId + &#x27;&quot;]&#x27;;

		return Dom.nodeCreate(Flash.objectEmbed(config.swfConfig)).firstChild;
	}

	/* Public methods */
	Lang.extend(ContentSwf, [Capability, Class], {

		/**
		 * Function auto initiated when the class is instantiated
		 *
		 * @method initializer
		 * @public
		 * @param {Object} config
		 */
		initializer: function (config) {
			/* Store the  configObject */
			this.set(&#x27;configObject&#x27;, config);

			/* listeners for events */
			this.initializeListeners();
		},

		/**
		 * Function to initialize event listeners for this instance
		 *
		 * @method initializeListeners
		 * @public
		 */
		initializeListeners: function () {
			var root = this;

			root.addEventListeners(
				/* Global Stop Content Event */
				Event.on(EVENT_GLOBAL_STOP_CONTENT, function () {
					var node = root.get(&#x27;node&#x27;);
					if (node) {
						SWFBridge.callSWF(node, &#x27;stopContent&#x27;);
					}
				}),

				/* Global Resize Event */
				Event.on(EVENT_GLOBAL_SCREEN_STATUS, function (status) {
					if (root.get(&#x27;configObject&#x27;) &amp;&amp; root.get(&#x27;configObject&#x27;).resize) {
						root.resize(status, root.get(&#x27;configObject&#x27;));
					}
				})
			);
		},

		/**
		 * Function called when the instance is destroyed
		 *
		 * @method destructor
		 * @public
		 */
		destructor: function () {
			var node = this.get(&#x27;node&#x27;);

			/* Remove the node from the DOM */
			if (node /* Dom.isDomElement(node) */ &amp;&amp; node.parentNode) { // Embed does not work with &#x27;isDomElement&#x27;
				node.parentNode.removeChild(node);
			}

			/* Unregistered context */
			SWFBridge.unregister(node.id);
		},

		/**
	     * Render the node from given config object, environment and orientation state
	     *
	     * @method renderContent
	     * @param {Object} configObject
	     * @param {String} env
	     * @param {String} orientation
	     * @return {HTMLElement} node
	     */
		renderContent: function (configObject) {
			var node = renderNodeObjectOrEmbed(configObject);
			node = this.applyNodeConfig(node, configObject);
			return node;
		},

		/**
		 * Function generating the node &#x27;EMBED&#x27; or &#x27;OBJECT&#x27;
		 *
         * @method getContent
         * @public
         * @param {String} env Environment for rendering content such as html/flash/backup
         * @param {String} orientation Orientation of current device such as landscape and portraits for mobile
         * @return {HTMLElement} node
         */
		getContent: function (env, orientation) {
			var node = this.renderContent(this.get(&#x27;configObject&#x27;), env, orientation);
			this.set(&#x27;node&#x27;, node);
			/* Registered context */
			SWFBridge.register(this, node.id);

			return {
				node: node
			};
		},

		/**
		 * Function call by flash through the bridge
		 *
		 * @method eventHandler
		 * @public
		 */
		eventHandler: function (id, event) {
			/*@&lt;*/
			Debug.log(&#x27;Bridge: get node context, event: &#x27;, this.get(&#x27;node&#x27;), event);
			/*&gt;@*/

			if (event.hasOwnProperty(&#x27;type&#x27;)) {
				Event.fire(event.type, { id: id, scope: this });
			} else if (event.hasOwnProperty(&#x27;actions&#x27;)) {
				Event.fire(&#x27;add:actions&#x27;, event.actions);
			}
		}
	});

	return ContentSwf;
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
