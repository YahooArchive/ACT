<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/core/ACT_layerStandard.js - ACT.js</title>
    <link rel="stylesheet" href="https://s.yimg.com/zz/combo?yui-s:3.14.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="https://s.yimg.com/rz/l/favicon.ico">
    <script src="https://s.yimg.com/zz/combo?yui-s:3.14.1/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="https://s.yimg.com/cv/ae/global/ACTJS/logo/ACT.js.logo.png" title="ACT.js" width="150"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.1.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                            <li><a href="#api-demos">Demo and Examples</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ACT.html">ACT</a></li>
                                <li><a href="../classes/ActionsQueue.html">ActionsQueue</a></li>
                                <li><a href="../classes/Base.html">Base</a></li>
                                <li><a href="../classes/Capability.html">Capability</a></li>
                                <li><a href="../classes/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../classes/Class.html">Class</a></li>
                                <li><a href="../classes/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../classes/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../classes/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../classes/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../classes/ContentImage.html">ContentImage</a></li>
                                <li><a href="../classes/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../classes/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../classes/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../classes/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../classes/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../classes/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../classes/Cookie.html">Cookie</a></li>
                                <li><a href="../classes/CustomData.html">CustomData</a></li>
                                <li><a href="../classes/Debug.html">Debug</a></li>
                                <li><a href="../classes/Dom.html">Dom</a></li>
                                <li><a href="../classes/DwellTime.html">DwellTime</a></li>
                                <li><a href="../classes/Enabler.html">Enabler</a></li>
                                <li><a href="../classes/EnablerADTECH.html">EnablerADTECH</a></li>
                                <li><a href="../classes/EnablerConfig.html">EnablerConfig</a></li>
                                <li><a href="../classes/Environment.html">Environment</a></li>
                                <li><a href="../classes/Event.html">Event</a></li>
                                <li><a href="../classes/Flash.html">Flash</a></li>
                                <li><a href="../classes/IO.html">IO</a></li>
                                <li><a href="../classes/Json.html">Json</a></li>
                                <li><a href="../classes/Lang.html">Lang</a></li>
                                <li><a href="../classes/LayersList.html">LayersList</a></li>
                                <li><a href="../classes/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../classes/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../classes/Screen.html">Screen</a></li>
                                <li><a href="../classes/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../classes/StandardAd.html">StandardAd</a></li>
                                <li><a href="../classes/Tracking.html">Tracking</a></li>
                                <li><a href="../classes/UA.html">UA</a></li>
                                <li><a href="../classes/Util.html">Util</a></li>
                                <li><a href="../classes/VideoEvents.html">VideoEvents</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ACT.html">ACT</a></li>
                                <li><a href="../modules/actionsQueue.html">actionsQueue</a></li>
                                <li><a href="../modules/Base.html">Base</a></li>
                                <li><a href="../modules/CapabilitySkeleton.html">CapabilitySkeleton</a></li>
                                <li><a href="../modules/ContentAdobeEdge.html">ContentAdobeEdge</a></li>
                                <li><a href="../modules/ContentCarousel.html">ContentCarousel</a></li>
                                <li><a href="../modules/ContentContainer.html">ContentContainer</a></li>
                                <li><a href="../modules/ContentHtml5.html">ContentHtml5</a></li>
                                <li><a href="../modules/ContentImage.html">ContentImage</a></li>
                                <li><a href="../modules/ContentProgressBar.html">ContentProgressBar</a></li>
                                <li><a href="../modules/ContentSwf.html">ContentSwf</a></li>
                                <li><a href="../modules/ContentThirdParty.html">ContentThirdParty</a></li>
                                <li><a href="../modules/ContentVideoFlash.html">ContentVideoFlash</a></li>
                                <li><a href="../modules/ContentVideoHtml.html">ContentVideoHtml</a></li>
                                <li><a href="../modules/ContentYoutube.html">ContentYoutube</a></li>
                                <li><a href="../modules/Cookie.html">Cookie</a></li>
                                <li><a href="../modules/DwellTime.html">DwellTime</a></li>
                                <li><a href="../modules/Enabler.html">Enabler</a></li>
                                <li><a href="../modules/EnablerADTECH.html">EnablerADTECH</a></li>
                                <li><a href="../modules/environment.html">environment</a></li>
                                <li><a href="../modules/IO.html">IO</a></li>
                                <li><a href="../modules/LayersList.html">LayersList</a></li>
                                <li><a href="../modules/LayerStandard.html">LayerStandard</a></li>
                                <li><a href="../modules/Scaffolding.html">Scaffolding</a></li>
                                <li><a href="../modules/Screen.html">Screen</a></li>
                                <li><a href="../modules/SecureDarla.html">SecureDarla</a></li>
                                <li><a href="../modules/StandardAd.html">StandardAd</a></li>
                                <li><a href="../modules/Tracking.html">Tracking</a></li>
                            </ul>
                
                            <ul id="api-demos" class="apis demos">
                                <li><a href="../demo/ACT_Demo_300x250.html">300x250</a></li>
                                <li><a href="../demo/ACT_Demo_300x250_tracking.html">300x250_tracking</a></li>
                                <li><a href="../demo/ACT_Demo_TrackingExample.html">TrackingExample</a></li>
                                <li><a href="../demo/ACT_Demo_animation.html">animation</a></li>
                                <li><a href="../demo/ACT_Demo_billboard.html">billboard</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-enabler.html">billboard-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard-expandable-enabler.html">billboard-expandable-enabler</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video.html">billboard_html_video</a></li>
                                <li><a href="../demo/ACT_Demo_billboard_html_video_rtl.html">billboard_html_video_rtl</a></li>
                                <li><a href="../demo/ACT_Demo_carousel.html">carousel</a></li>
                                <li><a href="../demo/ACT_Demo_dwelltime.html">dwelltime</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_expand.html">enabler_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_fullscreen_expand.html">enabler_fullscreen_expand</a></li>
                                <li><a href="../demo/ACT_Demo_enabler_target.html">enabler_target</a></li>
                                <li><a href="../demo/ACT_Demo_floating.html">floating</a></li>
                                <li><a href="../demo/ACT_Demo_force_env.html">force_env</a></li>
                                <li><a href="../demo/ACT_Demo_html5_enabler.html">html5_enabler</a></li>
                                <li><a href="../demo/ACT_Demo_html5_standard.html">html5_standard</a></li>
                                <li><a href="../demo/ACT_Demo_icons.html">icons</a></li>
                                <li><a href="../demo/ACT_Demo_input_data.html">input_data</a></li>
                                <li><a href="../demo/ACT_Demo_login_html.html">login_html</a></li>
                                <li><a href="../demo/ACT_Demo_overwrite_env.html">overwrite_env</a></li>
                                <li><a href="../demo/ACT_Demo_splash_ad.html">splash_ad</a></li>
                                <li><a href="../demo/ACT_Demo_tablet_expandable.html">tablet_expandable</a></li>
                                <li><a href="../demo/ACT_Demo_video_event.html">video_event</a></li>
                                <li><a href="../demo/ACT_Demo_video_html.html">video_html</a></li>
                            </ul>
                
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/core/ACT_layerStandard.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
 * Copyright 2016, Yahoo Inc.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 */

/* global ACT */
/**
 * The &#x27;LayerStandard&#x27; is a core module made to generate a parent &#x27;DIV&#x27; tag container with a specific position/configuration.
 * This module is used in &#x27;Layerslist&#x27;.
 *
 * @module LayerStandard
 * @main LayerStandard
 * @class LayerStandard
 * @requires Dom, Event, Lang, Scaffolding, Class
 * @global
 */
ACT.define(&#x27;LayerStandard&#x27;, [/*@&lt;*/&#x27;Debug&#x27;, /*&gt;@*/ &#x27;Dom&#x27;, &#x27;Event&#x27;, &#x27;Lang&#x27;, &#x27;Scaffolding&#x27;, &#x27;Class&#x27;], function (ACT) {
    &#x27;use strict&#x27;;

    /* Shorthand */
    var Lang = ACT.Lang;
    var Event = ACT.Event;
    var Dom = ACT.Dom;
    var Class = ACT.Class;

    /**
     * @constant TYPE
     */
    var TYPE = &#x27;standard&#x27;;

    /**
     * @constant DEFAULT_STYLE
     */
    var DEFAULT_STYLE = {
        overlay: {
            position: &#x27;absolute&#x27;,
            &#x27;z-index&#x27;: &#x27;1000000&#x27;
        },
        inline: {
            position: &#x27;relative&#x27;
        },
        anchor: {
            position: &#x27;fixed&#x27;,
            &#x27;z-index&#x27;: &#x27;1000000&#x27;
        }
    };
    var CENTER_STYLES;

    /*@&lt;*/
    var Debug = ACT.Debug;
    Debug.log(&#x27;[ ACT_layerStandard.js ] Loaded&#x27;);
    /*&gt;@*/

    /**
     * @constructor
     */
    function LayerStandard(config) {
        this.init(config);
        // LayerStandard.superclass.constructor.apply(this, arguments);
    }

    /**
     * Private functions
     */

    /**
     * Creating Css object for centering content in horizontal coordinate
     *
     * @method centerHorizontal
     * @private
     * @param {Object} config Style config for calculation
     * @return {Object} CSS object for applying center in horizontal coordinate
     */
    function centerHorizontal(config) {
        var width = parseInt(config.width, 10) || 0;

        return {
            &#x27;margin-left&#x27;: -(width / 2) + &#x27;px&#x27;,
            left: &#x27;50%&#x27;
        };
    }

    /**
     * Creating Css object for centering content in vertical coordinate
     *
     * @method centerVertical
     * @private
     * @param {Object} config Style config for calculation
     * @return {Object} CSS object for applying center in vertical coordinate
     */
    function centerVertical(config) {
        var height = parseInt(config.height, 10) || 0;
        return {
            &#x27;margin-top&#x27;: -(height / 2) + &#x27;px&#x27;,
            top: &#x27;50%&#x27;
        };
    }

    /**
     * Creating Css object for centering content in both horizontal and vertical coordinates
     *
     * @method centerBoth
     * @private
     * @param {Object} config Style config for calculation
     * @return {Object} CSS object for applying center in both coordinates (horizonal and vertical)
     */
    function centerBoth(config) {
        var centerH = centerHorizontal(config);
        var centerV = centerVertical(config);

        return Lang.merge(centerH, centerV);
    }

    /**
     * Collection of different styles for centering content
     * @constant CENTER_STYLES
     */
    CENTER_STYLES = {
        both: centerBoth,
        horizontal: centerHorizontal,
        vertical: centerVertical
    };

    /**
     * @method alignHorizontal
     * @private
     * @param {Object} config Object for setting style
     * @return {Object} Object style
     */
    function alignHorizontal(config, style) {
        if (config.alignH !== undefined) {
            style[config.alignH] = parseInt(config.x, 10) + &#x27;px&#x27;;
        } else {
            style.left = parseInt(config.x, 10) + &#x27;px&#x27;;
        }
    }

    /**
     * @method alignVertical
     * @private
     * @param {Object} config Object for setting style
     * @return {Object} Object style
     */
    function alignVertical(config, style) {
        if (config.alignV !== undefined) {
            style[config.alignV] = parseInt(config.y, 10) + &#x27;px&#x27;;
        } else {
            style.top = parseInt(config.y, 10) + &#x27;px&#x27;;
        }
    }

    /**
     * @method applyStyles
     * @private
     * @param {Object} config Object for setting style
     * @return {Object} Object style
     */
    function applyStyles(config, x, y) {
        var style = Lang.clone(DEFAULT_STYLE[config.type]) || {};
        var styleForCentering;
        /*@&lt;*/
        Debug.log(&#x27;[ ACT_layerStandard.js ] LayerStandard: x and y &#x27;, x, y);
        /*&gt;@*/

        // set general layer stylr
        if ((config.type === &#x27;overlay&#x27;) || (config.type === &#x27;anchor&#x27;)) {
            if (x !== config.x &amp;&amp; y !== config.y) {
                style.left = parseInt(x, 10) + &#x27;px&#x27;;
                style.top = parseInt(y, 10) + &#x27;px&#x27;;
            } else {
                // set horizontal alignement
                alignHorizontal(config, style);

                // set vertical alignement
                alignVertical(config, style);
            }
        }

        // set style width and height
        style.width = config.width;
        style.height = config.height;

        // applying center style of it set in config object
        if (config.center &amp;&amp; (config.center in CENTER_STYLES)) {
            styleForCentering = CENTER_STYLES[config.center](config);
            style = Lang.merge(style, styleForCentering);
        }

		// If CSS is passed in with the container definition, merge that in to overwrite
		// the default settings.
		if (config.css &amp;&amp; Lang.isObject(config.css)) {
			style = Lang.merge(style, config.css);
		}

        return style;
    }

    /**
     * default attribute
     */
    LayerStandard.ATTRS = {
        NAME: &#x27;LayerStandard&#x27;,

        /**
         * Config Object for initializing layer instance
         * @attribute config
         * @type Object
         * @default null
         */
        config: null,

        /**
         * @attribute layerName
         * @type String
         */
        layerName: &#x27;&#x27;,

        /**
         * @attribute container
         * @type HTMLElement
         * @default null
         */
        container: null,

        /**
         * Position to render layer, sShould be div id/class or body tag
         * @attribute base
         * @type String
         * @default body
         */
        base: &#x27;body&#x27;,

        /**
         * Attribute for keeping playing state of the layer
         * @attribute playing
         * @type Boolean
         * @default false
         */
        playing: false,

        /**
         * @attribute envToPlay
         * @type String
         * @default html
         */
        envToPlay: &#x27;html&#x27;,

        /**
         * @attribute currentDevice
         * @type String
         * @default desktop
         */
        currentDevice: &#x27;desktop&#x27;,

        /**
         * The alignV is used in anchor and overlay layers to define if posY should move the layer vertically from &#x27;top&#x27; or &#x27;bottom&#x27;. Default is &#x27;top&#x27;
         * @attribute alignV
         * @public
         * @type String
         * @default top
         */
        alignV: &#x27;top&#x27;,

        /**
         * The alignH is used in anchor and overlay layers to define if posX should move the layer vertically from &#x27;left&#x27; or &#x27;right&#x27;. Default is &#x27;left&#x27;
         * @attribute alignH
         * @public
         * @type String
         */
        alignH: &#x27;left&#x27;,

        /**
         * Only accept tl - tr - bl - br
         * @attribute coordinate
         * @type String
         * @default tl
         */
        coordinate: &#x27;tl&#x27;,

        /**
         * @attribute contentAppended
         * @type Boolean
         * @default false
         */
        contentAppended: false,

        /**
         * List of capability instances rendered inside this layer
         * @attribute capabilityInstances
         */
        capabilityInstances: [],

        /**
         * Flag to indicate if the layer should be tracked by dwelltime or not
         *
         * @attribute dwelltime
         * @default false
         */
        dwelltime: false,

        /**
         * reference to dwelltime tracking instances
         * @attribte dwelltimeInstance
         */
        dwelltimeInstance: null
    };

    /**
     * Public properties
     */
    Lang.extend(LayerStandard, Class, {

        /**
         * Function auto initiated when the class is instantiated
         *
         * @method initializer
         * @public
         * @param {Object} config
         */
        initializer: function (config) {
            var allowedToPlay = true;
            // need to keep a reference to original layer config
            this.set(&#x27;config&#x27;, config);
            this.set(&#x27;width&#x27;, config.width);
            this.set(&#x27;height&#x27;, config.height);

            if (&#x27;contentLayer&#x27; in config &amp;&amp; config.contentLayer.env) {
                allowedToPlay = Lang.inArray(config.contentLayer.env, config.envToPlay);
            }

            /*@&lt;*/
            Debug.log(&#x27;[ ACT_layerStandard.js ] recieved config:&#x27;, config);
            /*&gt;@*/

            /* create container */
            if (allowedToPlay === true) {
                this.createContainer();
                /* initialize dwelltime */
                if (this.get(&#x27;dwelltime&#x27;)) {
                    this.initDwellTimeTracking();
                }
            }
        },

        /**
         * Method to return the type of the layer
         *
         * @method getType
         * @public
         * @return {String} type of the layer
         */
        getType: function () {
            return TYPE;
        },

        /**
         * Function to render layer container
         *
         * @method createContainer
         * @public
         * @return {Element} node container
         */
        createContainer: function () {
            var nodeId = &#x27;ACT_&#x27; + this.get(&#x27;layerName&#x27;);
            // ES3: Removing .querySelector(&#x27;div&#x27;); replacing with firstChild
            var container = Dom.nodeCreate(&#x27;&lt;div style=&quot;display:none;&quot; id=&quot;&#x27; + nodeId + &#x27;&quot;&gt;&lt;/div&gt;&#x27;).firstChild;
            var baseSelector = this.get(&#x27;base&#x27;);
            var base;

            this.set(&#x27;container&#x27;, container);
            /* search order: tag Name -&gt; tag id -&gt; class name (tag name first to make sure we get body tag)
            */
            base = document.getElementsByTagName(baseSelector)[0] || Dom.byId(baseSelector) || Dom.byClassName(baseSelector)[0];

            /*@&lt;*/
            Debug.log(&#x27;[ ACT_layerStandard.js ] : baseSelector is: &#x27;, baseSelector, base);
            /*&gt;@*/

            if (base) {
                base.appendChild(container);
            }
        },

        /**
         * Add content directly or from config-object to layer container
         *
         * @method addContent
         * @public
         * @param {Element | String} [content] new content to add to layer container
         */
        addContent: function (content) {
            var root = this;
            var htmlParsered;
            var contentParsered;
            var myContentLayer = root.get(&#x27;contentLayer&#x27;);
            var allowedEnv = myContentLayer.env;
            var allowedToPlay = true;

            if (allowedEnv) {
                allowedToPlay = Lang.inArray(allowedEnv, root.get(&#x27;envToPlay&#x27;));
            }

            if (allowedToPlay === true) {
                if (!content) {
                    // TODO: Sinon test fails if Scaffolding&#x27;s shorthand version is used - Since this is the only place Scaffolding is
                    //     instatiated, I&#x27;m going to leave it as is.
                    /* call scafolding and add content */
                    htmlParsered = new ACT.Scaffolding({
                        refObj: root.get(&#x27;contentLayer&#x27;), // .contentLayer,
                        env: root.get(&#x27;envToPlay&#x27;),
                        status: &#x27;status&#x27;,
                        layerName: root.get(&#x27;layerName&#x27;)
                    });

                    contentParsered = htmlParsered.getHtmlParsered();
                    content = contentParsered.rawHtml;
                    root.set(&#x27;capabilityInstances&#x27;, contentParsered.capabilityInstances);
                }

                if (Dom.isDomElement(content)) {
                    root.get(&#x27;container&#x27;).appendChild(content);
                } else {
                    root.get(&#x27;container&#x27;).innerHTML += content;
                }

                root.set(&#x27;contentAppended&#x27;, true);
            }
        },

        /**
         * Function to play layer
         *
         * @method play
         * @public
         */
        play: function () {
            var root = this;

            // updating layer position first
            root.updateLayerPosition(function () {
                // re-applying style for layer container incase surrounding env changed
                var containerStyles = applyStyles(root.get(&#x27;config&#x27;), root.get(&#x27;x&#x27;), root.get(&#x27;y&#x27;));

                /*@&lt;*/
                Debug.info(&#x27;[ ACT_layerStandard.js ] containerStyles : &#x27;, containerStyles);
                /*&gt;@*/

                Dom.applyStyles(root.get(&#x27;container&#x27;), containerStyles);

                if (!root.get(&#x27;contentAppended&#x27;)) {
                    root.addContent();
                }

                Dom.display(root.get(&#x27;container&#x27;), &#x27;block&#x27;);

                root.set(&#x27;playing&#x27;, true);

                // send a message to any content about start it
                Event.fire(&#x27;layer:played&#x27;, {
                    layerName: root.get(&#x27;layerName&#x27;)
                });
                // checks if content is being added otherwise do so
            });
        },

        /**
         * Function to clean all capability instances belong to this layer
         *
         * @method cleanCapabilityInstance
         * @public
         */
        cleanCapabilityInstance: function () {
            // get all capability instances and destroy them
            var capabilityInstances = this.get(&#x27;capabilityInstances&#x27;);
            var instance;
            while (capabilityInstances.length &gt; 0) {
                instance = capabilityInstances.pop();
                instance.destroy();
            }
        },

        /**
         * Function to stop layer
         *
         * @method stop
         * @public
         * @param {Boolean} forceToDestroy
         */
        stop: function (forceToDestroy) {
            var root = this;
            var container = root.get(&#x27;container&#x27;);

            /* send a message to any content about start it */
            if (forceToDestroy) {
                root.cleanCapabilityInstance();
                Dom.clear(container);
                root.set(&#x27;contentAppended&#x27;, false);
            } else {
                // Dom.display(container, &#x27;none&#x27;);
            }

            Dom.display(container, &#x27;none&#x27;);

            root.set(&#x27;playing&#x27;, false);

            Event.fire(&#x27;layer:stopped&#x27;, {
                layerName: root.get(&#x27;layerName&#x27;)
            });
        },

        /**
         * Function to update current layer position
         *
         * @method updateLayerPosition
         * @public
         * @param {Function} callback Function to be executed when the update finish
         */
        updateLayerPosition: function (callback) {
            var root = this;
            var config = root.get(&#x27;config&#x27;);
            var layerName = root.get(&#x27;layerName&#x27;);
            var coordinate = root.get(&#x27;coordinate&#x27;);

            var attrToUpdate = {
                x: config.x,
                y: config.y
            };

            // listen to event fired back by layerList with new attribute value
            var listener = Event.on(&#x27;layersList:getLayerPosition:complete&#x27;, function (e) {
                /*@&lt;*/
                Debug.log(&#x27;[ ACT_layerStandard.js ] LayersList: new position for &#x27;, e.layerName, e.newValue);
                /*&gt;@*/
                // just to double check if this event is for this layer
                if (e.layerName === layerName) {
                    // stop listening to avoid messing event arround
                    listener.remove();
                    // update layer position with new value
                    root.setAttrs(e.newValue);
                    // execute next action
                    callback();
                }
            });

            // fire event to layerList asking for calculating layer position
            Event.fire(&#x27;layersList:getLayerPosition&#x27;, {
                layerName: layerName,
                attributes: attrToUpdate,
                coordinate: coordinate
            });
        },

        /**
         * Get current position of the layer
         *
         * @method currentLayerPosition
         * @public
         * @return {Array} Position X and Y. E.g [x, y]
         */
        currentLayerPosition: function () {
            return Dom.getElementPosition(this.get(&#x27;container&#x27;));
        },

        /**
         * Setup dwelltime tracking for the layer
         * @method initDwellTimeTracking
         */
        initDwellTimeTracking: function () {
            var dwellTime = new ACT.DwellTime({
                targetElement: this.get(&#x27;container&#x27;),
                targetName: this.get(&#x27;layerName&#x27;)
            });

            this.set(&#x27;dwelltimeInstance&#x27;, dwellTime);
        }
    });

    return LayerStandard;
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
