<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ACT.js Demo : video_event</title>
    <link rel="stylesheet" href="https://s.yimg.com/zz/combo?yui-s:3.14.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="https://s.yimg.com/rz/l/favicon.ico">
    <script src="https://s.yimg.com/zz/combo?yui-s:3.14.1/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="https://s.yimg.com/cv/ae/global/ACTJS/logo/ACT.js.logo.png" title="ACT.js Demos" width="126" height="100"></h1>
        </div>
        <div class="yui3-u-1-4 version">
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">	<div id="api-tabview" class="tabview">		<ul class="tabs">			<li><a href="#act-js-examples">Demo and Examples</a></li>		</ul>		<div id="api-tabview-filter">			<input type="search" id="api-filter" style="display:none;" placeholder="Type to filter Demos">		</div>		<div id="api-tabview-panel">			<ul id="api-classes" class="apis classes">							<li><a href="ACT_Demo_300x250.html">300x250</a></li>							<li><a href="ACT_Demo_300x250_tracking.html">300x250_tracking</a></li>							<li><a href="ACT_Demo_TrackingExample.html">TrackingExample</a></li>							<li><a href="ACT_Demo_animation.html">animation</a></li>							<li><a href="ACT_Demo_billboard.html">billboard</a></li>							<li><a href="ACT_Demo_billboard-enabler.html">billboard-enabler</a></li>							<li><a href="ACT_Demo_billboard-expandable-enabler.html">billboard-expandable-enabler</a></li>							<li><a href="ACT_Demo_billboard_html_video.html">billboard_html_video</a></li>							<li><a href="ACT_Demo_billboard_html_video_rtl.html">billboard_html_video_rtl</a></li>							<li><a href="ACT_Demo_carousel.html">carousel</a></li>							<li><a href="ACT_Demo_dwelltime.html">dwelltime</a></li>							<li><a href="ACT_Demo_enabler_expand.html">enabler_expand</a></li>							<li><a href="ACT_Demo_enabler_fullscreen_expand.html">enabler_fullscreen_expand</a></li>							<li><a href="ACT_Demo_enabler_target.html">enabler_target</a></li>							<li><a href="ACT_Demo_floating.html">floating</a></li>							<li><a href="ACT_Demo_force_env.html">force_env</a></li>							<li><a href="ACT_Demo_html5_enabler.html">html5_enabler</a></li>							<li><a href="ACT_Demo_html5_standard.html">html5_standard</a></li>							<li><a href="ACT_Demo_icons.html">icons</a></li>							<li><a href="ACT_Demo_input_data.html">input_data</a></li>							<li><a href="ACT_Demo_login_html.html">login_html</a></li>							<li><a href="ACT_Demo_overwrite_env.html">overwrite_env</a></li>							<li><a href="ACT_Demo_splash_ad.html">splash_ad</a></li>							<li><a href="ACT_Demo_tablet_expandable.html">tablet_expandable</a></li>							<li><a href="ACT_Demo_video_event.html">video_event</a></li>							<li><a href="ACT_Demo_video_html.html">video_html</a></li>						</ul>		</div>	</div></div>            </div>
        </div>
        <div class="yui3-u-3-4">
            <a href="../">Back to docs</a>            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>Demo For video_event</h1><div class="box meta">        <div class="foundat">File for this demo is found: examples/video_event/index.html</div></div><div id="classdocs" class="tabview">    <ul class="api-class-tabs">        <li class="api-class-tab index"><a href="#index">Rendered Example</a></li> 		    </ul>    <div>        <div id="index" class="api-class-tabpanel index"><link rel="stylesheet" href="../../src/assets/ACT_icons/ACT_icons.css"/>

<style>.edgeLoad-EDGE-14394255{visibility:hidden}</style>

<div id="act-ad-container" style="margin:0px auto;padding:0px;width:970px;min-height:20px">
    <div id="act-ad" style="margin:0px;padding:0px;position:relative;font-size:11px"></div>
</div>

<script src="https://s.yimg.com/cv/ae/latam/dev/libs/1440535501/edge.6.0.0.min.js"></script>

<script type="text/javascript">
    (function() {
        if (!window.ACT) {
            window.ACT = {
                "adQueue": []
            };
        }
        ACT.adQueue.push(
            function() {

                var ss = ss || {};

                var event = ACT.Event;
                var dom = ACT.Dom;
                var byID = dom.byId;
                var ua = ACT.UA;
                var lang = ACT.Lang;
                var videoEvent;

                /*
                 * EDGE CONFIG
                 */
                var edgeConfig;
                var edge;
                var composition = "EDGE-14394255";
                var divRedirect = {
                    width: "526px",
                    height: "250px"
                };

                var path = "https://s.yimg.com/cv/ae/br/adtech/cipol/1441283394/";
                var ad_url = "http://br.yahoo.com";

                var ad = ACT.Base({
                    conf: {
                        client: "CIPOL",
                        cookie: {
                            name: "uniqueAdName"
                        },
                        tracking: {
                            trackingFunctions: {
                				overwrite: true,
                				redirect: function() {},
                				interaction: function() {}
                			}
                        },
                        backup: { w: 970, h: 250, src: path + "backup-billboard.jpg" },
                        trkname: {
                            backup: "billboard_load_ad_backup",
                            html: "billboard_load_ad_html",
                            hclicks: "billboard_click_$name_clicktaghtml"
                        },
                        pixels: [""]
                    },
                    extend: {
                        ad_init: function(){
                            var conf = this.config;
                            var prefix = conf.client;
                            edgeConfig = {
                                id: prefix,
                                adobeEdgeConfig: {
                                    compositionLink: path+prefix,
                                    compositionId: composition,
                                    options: {
                                        scaleToFit: "none",
                                        centerStage: "none",
                                        minW: "0px",
                                        maxW: "undefined",
                                        width: "970px",
                                        height: "250px"
                                    },
                                    domBefore: {"dom":{}},
                                    domAfter: {"dom":{}}
                                }
                            };
                            edge = new ACT.ContentAdobeEdge(edgeConfig);
                            this.loadBB();
                        },
                        loadBB: function(){
                            if( ua.isHtml5Supported ) {
                                var node = edge.getContent().node;
                                if(node){
                                    var tag = "<div id='redirect'></div>";
                                    var clickNode = dom.nodeCreate(tag).firstChild;
                                    if(clickNode!==null){
                                        var style = {
                                            background: "url('https://s.yimg.com/cv/eng/externals/131110/a/p.gif')",
                                            position: "absolute",
                                            right: 0,
                                            zIndex: "10",
                                            cursor: "pointer"
                                        };
                                        dom.applyStyles(clickNode, lang.merge(style, divRedirect));
                                        clickNode.onclick = function(e){ ad.adRedirect(ad_url); };
                                        node.appendChild(clickNode);
                                    }
                                    byID("act-ad").appendChild(node);
                                    AdobeEdge.bootstrapCallback(ad.adLoaded);
                                }
                            } else {
                                ad.loadBackup();
                            }
                        },
                        adLoaded: function(compID){
                            if(compID == composition){
                                var video = AdobeEdge.$("#CIPOL_cipol30s250x444")[0];
                                if(video){
                                    var config = {
                                        tracking: {
                                            start : true,
                                            25 : true,
                                            50: true,
                                            75: true,
                                            ended: true,
                                            pause: true,
                                            volumechange: true,
                                            seeked: false,
                                            clicked: true
                                        }
                                    };
                                    videoEvent = new ACT.VideoEvents(video, "cipol", config);
                                    console.log(videoEvent);
                                    event.on("video:action", ad.videoTrack);
                                }
                            }
                        },
                        videoTrack: function(data) {
                            console.log(data);
                        },
                        adRedirect: function(url){
                            var conf = this.config;
                            var trName = conf.trkname.hclicks;
                            var redirId = trName.replace("$name", conf.client.toLowerCase());
                            var redir = this.redirect_track(redirId, 125, url);
                            try{
                                if(redir!=""){ window.open(redir, "_blank"); }
                            } catch(e){}
                        },
                        loadBackup: function(){
                            var conf = this.config;
                            var img = conf.backup;
                            var container = byID("act-ad");
                            var node = "<img width='"+img.w+"' height='"+img.h+"' src='"+img.src+"' />";
                            var tag = "<a href='"+ad_url+"'>"+node+"</a>";
                            container.innerHTML = tag;
                            this.interaction_track(conf.trkname.backup);
                        }
                    }
                });
            }
        );
    })();
</script>

<script src="../../src/core/ACT.js"></script>
<script src="../../src/core/ACT_Layerslist.js"></script>
<script src="../../src/core/ACT_Screen.js"></script>
<script src="../../src/core/ACT_StandardAd.js"></script>
<script src="../../src/core/ACT_TrackingFacade.js"></script>
<script src="../../src/core/ACT_actionsQueue.js"></script>
<script src="../../src/core/ACT_base.js"></script>
<script src="../../src/core/ACT_cookie.js"></script>
<script src="../../src/core/ACT_environment.js"></script>
<script src="../../src/core/ACT_layerStandard.js"></script>
<script src="../../src/core/ACT_scaffolding.js"></script>
<script src="../../src/core/ACT_secureDarla.js"></script>
<script src="../../src/library/ACT_IO.js"></script>
<script src="../../src/library/ACT_UA.js"></script>
<script src="../../src/library/ACT_animation.js"></script>
<script src="../../src/library/ACT_capability.js"></script>
<script src="../../src/library/ACT_class.js"></script>
<script src="../../src/library/ACT_customData.js"></script>
<script src="../../src/library/ACT_debug.js"></script>
<script src="../../src/library/ACT_dom.js"></script>
<script src="../../src/library/ACT_event.js"></script>
<script src="../../src/library/ACT_flash.js"></script>
<script src="../../src/library/ACT_json.js"></script>
<script src="../../src/library/ACT_lang.js"></script>
<script src="../../src/library/ACT_util.js"></script>
<script src="../../src/library/ACT_VideoEvents.js"></script>
<script src="../../src/capabilities/ACT_contentContainer.js"></script>
<script src="../../src/capabilities/ACT_contentImage.js"></script>
<script src="../../src/capabilities/ACT_contentAdobeEdge.js"></script>
</div> 		   </div></div><div class="box intro">	<pre class="code prettyprint"><code>&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;../../src/assets/ACT_icons/ACT_icons.css&quot;/&gt;

&lt;style&gt;.edgeLoad-EDGE-14394255{visibility:hidden}&lt;/style&gt;

&lt;div id&#x3D;&quot;act-ad-container&quot; style&#x3D;&quot;margin:0px auto;padding:0px;width:970px;min-height:20px&quot;&gt;
    &lt;div id&#x3D;&quot;act-ad&quot; style&#x3D;&quot;margin:0px;padding:0px;position:relative;font-size:11px&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script src&#x3D;&quot;https://s.yimg.com/cv/ae/latam/dev/libs/1440535501/edge.6.0.0.min.js&quot;&gt;&lt;/script&gt;

&lt;script type&#x3D;&quot;text/javascript&quot;&gt;
    (function() {
        if (!window.ACT) {
            window.ACT &#x3D; {
                &quot;adQueue&quot;: []
            };
        }
        ACT.adQueue.push(
            function() {

                var ss &#x3D; ss || {};

                var event &#x3D; ACT.Event;
                var dom &#x3D; ACT.Dom;
                var byID &#x3D; dom.byId;
                var ua &#x3D; ACT.UA;
                var lang &#x3D; ACT.Lang;
                var videoEvent;

                /*
                 * EDGE CONFIG
                 */
                var edgeConfig;
                var edge;
                var composition &#x3D; &quot;EDGE-14394255&quot;;
                var divRedirect &#x3D; {
                    width: &quot;526px&quot;,
                    height: &quot;250px&quot;
                };

                var path &#x3D; &quot;https://s.yimg.com/cv/ae/br/adtech/cipol/1441283394/&quot;;
                var ad_url &#x3D; &quot;http://br.yahoo.com&quot;;

                var ad &#x3D; ACT.Base({
                    conf: {
                        client: &quot;CIPOL&quot;,
                        cookie: {
                            name: &quot;uniqueAdName&quot;
                        },
                        tracking: {
                            trackingFunctions: {
                				overwrite: true,
                				redirect: function() {},
                				interaction: function() {}
                			}
                        },
                        backup: { w: 970, h: 250, src: path + &quot;backup-billboard.jpg&quot; },
                        trkname: {
                            backup: &quot;billboard_load_ad_backup&quot;,
                            html: &quot;billboard_load_ad_html&quot;,
                            hclicks: &quot;billboard_click_$name_clicktaghtml&quot;
                        },
                        pixels: [&quot;&quot;]
                    },
                    extend: {
                        ad_init: function(){
                            var conf &#x3D; this.config;
                            var prefix &#x3D; conf.client;
                            edgeConfig &#x3D; {
                                id: prefix,
                                adobeEdgeConfig: {
                                    compositionLink: path+prefix,
                                    compositionId: composition,
                                    options: {
                                        scaleToFit: &quot;none&quot;,
                                        centerStage: &quot;none&quot;,
                                        minW: &quot;0px&quot;,
                                        maxW: &quot;undefined&quot;,
                                        width: &quot;970px&quot;,
                                        height: &quot;250px&quot;
                                    },
                                    domBefore: {&quot;dom&quot;:{}},
                                    domAfter: {&quot;dom&quot;:{}}
                                }
                            };
                            edge &#x3D; new ACT.ContentAdobeEdge(edgeConfig);
                            this.loadBB();
                        },
                        loadBB: function(){
                            if( ua.isHtml5Supported ) {
                                var node &#x3D; edge.getContent().node;
                                if(node){
                                    var tag &#x3D; &quot;&lt;div id&#x3D;&#x27;redirect&#x27;&gt;&lt;/div&gt;&quot;;
                                    var clickNode &#x3D; dom.nodeCreate(tag).firstChild;
                                    if(clickNode!&#x3D;&#x3D;null){
                                        var style &#x3D; {
                                            background: &quot;url(&#x27;https://s.yimg.com/cv/eng/externals/131110/a/p.gif&#x27;)&quot;,
                                            position: &quot;absolute&quot;,
                                            right: 0,
                                            zIndex: &quot;10&quot;,
                                            cursor: &quot;pointer&quot;
                                        };
                                        dom.applyStyles(clickNode, lang.merge(style, divRedirect));
                                        clickNode.onclick &#x3D; function(e){ ad.adRedirect(ad_url); };
                                        node.appendChild(clickNode);
                                    }
                                    byID(&quot;act-ad&quot;).appendChild(node);
                                    AdobeEdge.bootstrapCallback(ad.adLoaded);
                                }
                            } else {
                                ad.loadBackup();
                            }
                        },
                        adLoaded: function(compID){
                            if(compID &#x3D;&#x3D; composition){
                                var video &#x3D; AdobeEdge.$(&quot;#CIPOL_cipol30s250x444&quot;)[0];
                                if(video){
                                    var config &#x3D; {
                                        tracking: {
                                            start : true,
                                            25 : true,
                                            50: true,
                                            75: true,
                                            ended: true,
                                            pause: true,
                                            volumechange: true,
                                            seeked: false,
                                            clicked: true
                                        }
                                    };
                                    videoEvent &#x3D; new ACT.VideoEvents(video, &quot;cipol&quot;, config);
                                    console.log(videoEvent);
                                    event.on(&quot;video:action&quot;, ad.videoTrack);
                                }
                            }
                        },
                        videoTrack: function(data) {
                            console.log(data);
                        },
                        adRedirect: function(url){
                            var conf &#x3D; this.config;
                            var trName &#x3D; conf.trkname.hclicks;
                            var redirId &#x3D; trName.replace(&quot;$name&quot;, conf.client.toLowerCase());
                            var redir &#x3D; this.redirect_track(redirId, 125, url);
                            try{
                                if(redir!&#x3D;&quot;&quot;){ window.open(redir, &quot;_blank&quot;); }
                            } catch(e){}
                        },
                        loadBackup: function(){
                            var conf &#x3D; this.config;
                            var img &#x3D; conf.backup;
                            var container &#x3D; byID(&quot;act-ad&quot;);
                            var node &#x3D; &quot;&lt;img width&#x3D;&#x27;&quot;+img.w+&quot;&#x27; height&#x3D;&#x27;&quot;+img.h+&quot;&#x27; src&#x3D;&#x27;&quot;+img.src+&quot;&#x27; /&gt;&quot;;
                            var tag &#x3D; &quot;&lt;a href&#x3D;&#x27;&quot;+ad_url+&quot;&#x27;&gt;&quot;+node+&quot;&lt;/a&gt;&quot;;
                            container.innerHTML &#x3D; tag;
                            this.interaction_track(conf.trkname.backup);
                        }
                    }
                });
            }
        );
    })();
&lt;/script&gt;

&lt;script src&#x3D;&quot;../../src/core/ACT.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_Layerslist.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_Screen.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_StandardAd.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_TrackingFacade.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_actionsQueue.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_base.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_cookie.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_environment.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_layerStandard.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_scaffolding.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/core/ACT_secureDarla.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_IO.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_UA.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_animation.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_capability.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_class.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_customData.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_debug.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_dom.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_event.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_flash.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_json.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_lang.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_util.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/library/ACT_VideoEvents.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/capabilities/ACT_contentContainer.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/capabilities/ACT_contentImage.js&quot;&gt;&lt;/script&gt;
&lt;script src&#x3D;&quot;../../src/capabilities/ACT_contentAdobeEdge.js&quot;&gt;&lt;/script&gt;
</code></pre></div>                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
